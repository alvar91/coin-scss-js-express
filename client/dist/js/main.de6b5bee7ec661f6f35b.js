(()=>{"use strict";var e,t={672:(e,t,n)=>{function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],c=!0,u=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u,a,s,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"addEscapeEvent",value:function(e,t){("Escape"===e.key||"Esc"===e.key)&&t(e)}},{key:"getShortDescription",value:function(e){return e.length>=DESCRIPTION_LENGTH?"".concat(e.slice(0,DESCRIPTION_LENGTH-1),"..."):e}},{key:"isOnline",value:function(){return window.navigator.onLine}},{key:"sortAccountsByNumber",value:function(e,t){return e.account>t.account?1:-1}},{key:"sortAccountsByBalance",value:function(e,t){return e.balance>t.balance?1:-1}},{key:"sortAccountsByTransaction",value:function(e,t){var n,r,o=null==e||null===(n=e.transactions[0])||void 0===n?void 0:n.date,i=null==t||null===(r=t.transactions[0])||void 0===r?void 0:r.date;return o&&i?o>i?1:-1:0}},{key:"toast",value:function(e){var t=document.createElement("div"),n=document.createElement("div");t.classList.add("toast-container"),document.body.append(t),n.textContent=e,n.classList.add("toast-item"),t.append(n),setTimeout((function(){n.remove()}),5e3)}},{key:"toUpperCaseFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"formatDate",value:function(e){return e=new Date(e),String(e.getDate()).padStart(2,"0")+" "+["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][String(e.getMonth())]+" "+e.getFullYear()}},{key:"formatDateTime",value:function(e){var t;return null===(t=new Date(e))||void 0===t?void 0:t.toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"})}},{key:"formatTime",value:function(e){var t;return null===(t=new Date(e))||void 0===t?void 0:t.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}},{key:"formatMoney",value:function(e){return null==e?void 0:e.toLocaleString("ru-RU")}},{key:"mapTransactionsByMonths",value:function(e){var t=e.transactions,n=e.account,r={},i={},c=new Date;c=new Date(c.setFullYear(c.getFullYear()-1));var u,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){a=!0,c=e},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw c}}}}(t);try{for(a.s();!(u=a.n()).done;){var s=u.value,l=new Date(s.date),f=l.getMonth();l>=c&&(s.to==n?this.calculateProfitOrLossByMonths(r,f,s):this.calculateProfitOrLossByMonths(i,f,s))}}catch(e){a.e(e)}finally{a.f()}return{loss:i,profit:r}}},{key:"filterTransactionsInLastHalfYear",value:function(e){var t={},n=(new Date).getMonth(),o=null;return n-6<0?(o=Math.abs(Math.abs(n-6)-12),function(){for(var i=0,c=Object.entries(e);i<c.length;i++){var u=r(c[i],2),a=u[0],s=u[1];o-n<0?(a<o||a>=n)&&(t[a]=s):(a>o||a<=n)&&(t[a]=s)}}()):(o=n-6,function(){for(var i=0,c=Object.entries(e);i<c.length;i++){var u=r(c[i],2),a=u[0],s=u[1];a>o&&a<=n&&(t[a]=s)}}()),t}},{key:"sortTranactionsByDate",value:function(e,t){return e.date>t.date?1:-1}},{key:"getErrorNotFiled",value:function(e){return'Ошибка: Поле "'.concat(e,'" должно быть заполнено')}},{key:"getErrorNotLengthMoreThan6",value:function(e){return'Ошибка: Поле "'.concat(e,'" должно быть длиной не менее ').concat(J," символов")}},{key:"getErrorNotValidForm",value:function(e){return'Ошибка: Невалидная форма "'.concat(e,'"')}},{key:"getErrorNotLengthIs26",value:function(e){return'Ошибка: Поле "'.concat(e,'" должно быть длиной ').concat(W," символов")}},{key:"getErrorNotValueMoreThanAccountHave",value:function(e){return'Ошибка: Поле "'.concat(e,'" должно быть не более доступных средств на счете и больше нуля')}},{key:"notEqualFromAndTo",value:function(e){return'Ошибка: "'.concat(e,'" не может быть равен исходящему счету')}},{key:"createUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}}],(n=null)&&c(t.prototype,n),i&&c(t,i),e}();function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s=function(e,t,n){if(e[t]){var r=e[t];e[t]=r+n.amount}else e[t]=n.amount},(a="calculateProfitOrLossByMonths")in(u=l)?Object.defineProperty(u,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[a]=s;var y="".concat("coin-localstorage","-").concat("v1"),d="afterbegin",p="beforeend",h="beforebegin",v="afterend",b="SEND_LOGIN",m="ADD_NEW_ACCOUNT",_="PATCH",g="MINOR",w="MAJOR",C="ADDING",k="ABORTING",O="inputText",j="inputPassword",S="inputNumber",E="inputTransactionDropdown",T="Войти",P="Отправить",A="Обменять",R={password:"Пароль",name:"Логин",paymentNumber:"Номер счета получателя",paymentSum:"Сумма перевода",sum:"Сумма"},F="По номеру",B="По балансу",x="По последней транзакции",L="password",M="login",D="paymentNumber",I="paymentSum",H="notEmpty",q="isLengthMoreThan6",N="isLengthIs26",V="notEqualFromAndTo",U="isValueMoreThanAccountHave",K=function(){var e,t;return[{id:"".concat(l.createUUID()),type:O,title:R.name,name:M,value:"",required:!0,validation:(e={},f(e,H,l.getErrorNotFiled(R.name)),f(e,q,l.getErrorNotLengthMoreThan6(R.name)),e),isValid:!1,isTouched:!1},{id:"".concat(l.createUUID()),type:j,title:R.password,name:L,value:"",required:!0,validation:(t={},f(t,H,l.getErrorNotFiled(R.password)),f(t,q,l.getErrorNotLengthMoreThan6(R.password)),t),isValid:!1,isTouched:!1}]},Y=function(){var e,t;return[{id:"".concat(l.createUUID()),type:E,title:R.paymentNumber,name:D,value:"",required:!0,validation:(e={},f(e,H,l.getErrorNotFiled(R.paymentNumber)),f(e,V,l.notEqualFromAndTo(R.paymentNumber)),f(e,N,l.getErrorNotLengthIs26(R.paymentNumber)),e),isValid:!1,isTouched:!1},{id:"".concat(l.createUUID()),type:S,title:R.paymentSum,name:I,value:"",required:!0,validation:(t={},f(t,H,l.getErrorNotFiled(R.paymentSum)),f(t,U,l.getErrorNotValueMoreThanAccountHave(R.paymentSum)),t),isValid:!1,isTouched:!1}]},Z=function(){var e;return[{id:"".concat(l.createUUID()),type:S,title:R.sum,name:I,value:"",required:!0,validation:(e={},f(e,H,l.getErrorNotFiled(R.paymentSum)),f(e,U,l.getErrorNotValueMoreThanAccountHave(R.paymentSum)),e),isValid:!1,isTouched:!1}]},J=6,W=26,$={accounts:{},banks:[],auth:{},pageOrders:{showAccountPage:[{0:"a"},{1:"b"},{2:"c"}],showHistoryPage:[{0:"a"},{1:"b"},{2:"c"}],showCurrencyPage:[{0:"a"},{1:"b"},{2:"c"}]},mappedLastYearTransactionsByMonth:{loss:{},profit:{}},verifiedAccountsByTransactions:[]},z="expireDate",G={0:"янв",1:"фев",2:"мар",3:"апр",4:"май",5:"июн",6:"июл",7:"авг",8:"сен",9:"окт",10:"ноя",11:"дек"};function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,"navigateTo",(function(e){e!==location.pathname&&(history.pushState(null,null,e),n._router())})),X(this,"getCurrentRoute",(function(){return location.pathname.split("/")[1]})),X(this,"_isValidParam",(function(e){return 2===e.length&&Number.isInteger(+e[1])})),X(this,"_router",(function(){if(n._presenter.getIsAuth()){n._presenter.resetWebSocketTransfer();var e=location.pathname.split("/").slice(1);"logout"!==e[0]?"accounts"!==e[0]?"currency"!==e[0]?"banks"!==e[0]?"account"===e[0]&&n._isValidParam(e)?n._presenter.accountIdRoute(e[1]):"history"===e[0]&&n._isValidParam(e)?n._presenter.accountIdHistory(e[1]):n.navigateTo("/accounts"):n._presenter.banksRoute():n._presenter.currencyRoute():n._presenter.accountsRoute():n._presenter.resetRoute()}else n._presenter.resetRoute()})),this._presenter=t}var t,n,r;return t=e,(n=[{key:"init",value:function(){window.addEventListener("popstate",this._router),this._router()}}])&&Q(t.prototype,n),r&&Q(t,r),e}();function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne="GET",re="POST",oe=200,ie=299,ce=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._endPoint=t,this._wsEndPoint=n}var t,n,r;return t=e,r=[{key:"catchError",value:function(e){throw e}},{key:"checkStatus",value:function(e){if(e.status<oe||e.status>ie)throw new Error("".concat(e.status,": ").concat(e.statusText));return e}},{key:"toJSON",value:function(e){return e.json()}}],(n=[{key:"_load",value:function(t){var n=t.url,r=t.method,o=void 0===r?ne:r,i=t.body,c=void 0===i?null:i,u=t.headers,a=void 0===u?new Headers:u,s=t.token;return a.append("authorization","Basic ".concat(s)),fetch("".concat(this._endPoint,"/").concat(n),{method:o,body:c,headers:a}).then(e.checkStatus).catch(e.catchError)}},{key:"getWebSocketConnectionTransfer",value:function(){return new WebSocket("".concat(this._wsEndPoint,"/currency-feed"))}},{key:"login",value:function(t){return this._load({url:"login",method:re,body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})}).then(e.toJSON).then((function(e){return e}))}},{key:"addAccount",value:function(t){return this._load({url:"create-account",method:re,token:t}).then(e.toJSON).then((function(e){return e.payload}))}},{key:"getAccounts",value:function(t){return this._load({url:"accounts",token:t}).then(e.toJSON).then((function(e){return e}))}},{key:"getAccount",value:function(t){var n=t.token,r=t.accountId;return r||Promise.reject(new Error("Account id is required")),this._load({url:"account/".concat(r),token:n}).then(e.toJSON).then((function(e){return e}))}},{key:"getBanks",value:function(t){return this._load({url:"banks",token:t}).then(e.toJSON).then((function(e){return e}))}},{key:"newTransaction",value:function(t,n){return this._load({url:"transfer-funds",method:re,body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),token:n}).then(e.toJSON).then((function(e){return e}))}},{key:"newCurrency",value:function(t,n){return this._load({url:"currency-buy",method:re,body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),token:n}).then(e.toJSON).then((function(e){return e}))}},{key:"getAllCurrencies",value:function(){return this._load({url:"all-currencies"}).then(e.toJSON).then((function(e){return e.payload}))}},{key:"getMyCurrencies",value:function(t){return this._load({url:"currencies",token:t}).then(e.toJSON).then((function(e){return e.payload}))}},{key:"getCurrencies",value:function(e){return Promise.all([this.getAllCurrencies(),this.getMyCurrencies(e)])}}])&&te(t.prototype,n),r&&te(t,r),e}();function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ae(this,"_initiateStoreStructure",(function(){!!r._storage[r._storeKey]||r.setItems($)})),ae(this,"getItems",(function(){try{return JSON.parse(r._storage.getItem(r._storeKey))||{}}catch(e){return{}}})),ae(this,"getItem",(function(e){var t=e.key,n=e.subKey,o=r.getItems();if(o[t]&&o[t][n])return o[t][n];if(o[t])return o[t];throw new Error("Key storage non exist")})),ae(this,"setItem",(function(e){var t=e.key,n=e.subKey,o=e.subKey2,i=e.value,c=r.getItems();c[t]&&n&&o?c[t][n][o]=i:c[t]&&n?c[t][n]=i:c[t]=i;var u=new Date;c[z]=u.setDate(u.getDate()+1),r._storage.setItem(r._storeKey,JSON.stringify(c))})),ae(this,"setItems",(function(e){r._storage.setItem(r._storeKey,JSON.stringify(e))})),ae(this,"resetStorage",(function(){r.setItems($)})),ae(this,"resetMinorStorage",(function(){var e=$,t=r.getItem({key:"auth"}),n=r.getItem({key:"pageOrders"}),o=r.getItem({key:"verifiedAccountsByTransactions"});e.auth=t,e.pageOrders=n,e.verifiedAccountsByTransactions=o,r.setItems(e)})),this._storage=n,this._storeKey=t,this._initiateStoreStructure()}var t,n,r;return t=e,n=[{key:"concatItem",value:function(e){var t=e.key,n=e.value,r=this.getItem({key:t}),o=[].concat(r);return o.includes(n)||o.push(n),o}}],n&&ue(t.prototype,n),r&&ue(t,r),e}();function le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._api=t,this._store=n}var t,n,r;return t=e,n=[{key:"getWebSocketConnectionTransfer",value:function(){if(l.isOnline())return this._api.getWebSocketConnectionTransfer()}},{key:"getAccounts",value:function(e){var t=this;return this._getIsItemPersisted({key:"accounts"})&&this._isNotExpired()?Promise.resolve(Object.values(this._store.getItem({key:"accounts"}))):l.isOnline()?this._api.getAccounts(e).then((function(e){var n,r=e.payload,o=le(r);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=i.account;t.setItem({key:"accounts",subKey:c,value:i})}}catch(e){o.e(e)}finally{o.f()}return r})):Promise.reject(new Error("Fetch accounts failed"))}},{key:"_getIsItemPersisted",value:function(e){var t=e.key,n=e.subKey;return t&&n?!!Object.keys(this._store.getItem({key:t,subKey:n})).length>0:!!t&&!!Object.keys(this._store.getItem({key:t})).length>0}},{key:"getAccount",value:function(e){var t=this,n=e.accountId;return this._getIsItemPersisted({key:"accounts",subKey:n})&&this._store.getItem({key:"accounts",subKey:n}).transactions.length>1&&this._isNotExpired()?Promise.resolve(this._store.getItem({key:"accounts",subKey:n})):l.isOnline()?this._api.getAccount(e).then((function(e){var r=e.payload,o=r.account;t._store.setItem({key:"accounts",subKey:n,value:r});var i=l.mapTransactionsByMonths(r),c=i.loss,u=i.profit;return t._store.setItem({key:"mappedLastYearTransactionsByMonth",subKey:"loss",subKey2:o,value:c}),t._store.setItem({key:"mappedLastYearTransactionsByMonth",subKey:"profit",subKey2:o,value:u}),r})):Promise.reject(new Error("Fetch account failed"))}},{key:"newTransaction",value:function(e,t){var n=this;if(l.isOnline())return this._api.newTransaction(e,t).then((function(t){n.resetMinorStorage();var r=n._store.concatItem({key:"verifiedAccountsByTransactions",value:e.to});return n._store.setItem({key:"verifiedAccountsByTransactions",value:r}),t}))}},{key:"newCurrency",value:function(e,t){if(l.isOnline())return this._api.newCurrency(e,t).then((function(e){return e}))}},{key:"getMappedLastYearTransactions",value:function(e){return{loss:this._store.getItem({key:"mappedLastYearTransactionsByMonth",subKey:"loss",subKey2:e}),profit:this._store.getItem({key:"mappedLastYearTransactionsByMonth",subKey:"profit",subKey2:e})}}},{key:"addAccount",value:function(e){var t=this;return l.isOnline()?this._api.addAccount(e).then((function(e){var n=e.account;return t.setItem({key:"accounts",subKey:n,value:e}),e})):Promise.reject(new Error("Add account failed"))}},{key:"getBanks",value:function(e){var t=this;return this._getIsItemPersisted({key:"banks"})&&this._isNotExpired()?Promise.resolve(Object.values(this._store.getItem({key:"banks"}))):l.isOnline()?this._api.getBanks(e).then((function(e){var n=e.payload;return t.setItem({key:"banks",value:n}),n})):Promise.reject(new Error("Fetch banks failed"))}},{key:"getCurrencies",value:function(e){if(l.isOnline())return this._api.getCurrencies(e).then((function(e){return e}))}},{key:"login",value:function(e){if(l.isOnline())return this._api.login(e)}},{key:"setItem",value:function(e){this._store.setItem(e)}},{key:"getToken",value:function(){var e;return this._getIsItemPersisted({key:"auth"})&&this._isNotExpired()?null===(e=this._store.getItem({key:"auth"}))||void 0===e?void 0:e.token:null}},{key:"getIsAuth",value:function(){return!(!this._getIsTokenPersisted()||!this._isNotExpired())||(this.resetStorage(),!1)}},{key:"_getIsTokenPersisted",value:function(){var e;return!(null===(e=this._store.getItem({key:"auth"}))||void 0===e||!e.token)}},{key:"_isNotExpired",value:function(){var e=this._store.getItem({key:"expireDate"});return new Date<=e}},{key:"resetStorage",value:function(){this._store.resetStorage()}},{key:"resetMinorStorage",value:function(){this._store.resetMinorStorage()}},{key:"setShowAccountOrder",value:function(e){this.setItem({key:"pageOrders",subKey:"showAccountPage",value:e})}},{key:"getShowAccountOrder",value:function(){return this._store.getItem({key:"pageOrders",subKey:"showAccountPage"})}},{key:"setShowHistoryOrder",value:function(e){this.setItem({key:"pageOrders",subKey:"showHistoryPage",value:e})}},{key:"setShowCurrencyOrder",value:function(e){this.setItem({key:"pageOrders",subKey:"showCurrencyPage",value:e})}},{key:"getShowHistoryOrder",value:function(){return this._store.getItem({key:"pageOrders",subKey:"showHistoryPage"})}},{key:"getShowCurrencyOrder",value:function(){return this._store.getItem({key:"pageOrders",subKey:"showCurrencyPage"})}},{key:"getVerifiedAccounts",value:function(){return this._store.getItem({key:"verifiedAccountsByTransactions"})}}],n&&ye(t.prototype,n),r&&ye(t,r),e}();function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var he=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._observers=new Set}var t,n,r;return t=e,(n=[{key:"_notify",value:function(e,t){this._observers.forEach((function(n){return n(e,t)}))}},{key:"addObserver",value:function(e){this._observers.add(e)}},{key:"removeObserver",value:function(e){this._observers.delete(e)}}])&&pe(t.prototype,n),r&&pe(t,r),e}();function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(i,e);var t,n,r,o=_e(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._accounts=[],e._currentAccount=null,e._currentSortType=F,e}return t=i,(n=[{key:"setIsAccountsLoading",value:function(e,t){this._notify(e,t)}},{key:"getAccount",value:function(e){return this._accounts[e]}},{key:"setAccount",value:function(e,t){var n=this._accounts.slice();n.push(t),this._accounts=n,this._notify(e,{isLoading:!1})}},{key:"getAccounts",value:function(){return this._accounts}},{key:"getAccountsCount",value:function(){return this._accounts.length}},{key:"setAccounts",value:function(e,t){this._accounts=t.slice(),this._notify(e,{isLoading:!1})}},{key:"setSortType",value:function(e,t){this._currentSortType=t,this._notify(e,{isLoading:!1})}},{key:"getCurrentSortType",value:function(){return this._currentSortType}},{key:"setCurrentAccount",value:function(e,t){this._currentAccount=t;var n=t.account;this._notify(e,{isLoading:!1,accountId:n})}},{key:"getCurrentAccount",value:function(){return this._currentAccount}},{key:"resetCurrentAccount",value:function(){this._currentAccount=null}}])&&be(t.prototype,n),r&&be(t,r),i}(he);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},je(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(i,e);var t,n,r,o=Se(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._banks=[],e}return t=i,(n=[{key:"setIsBanksLoading",value:function(e,t){this._notify(e,t)}},{key:"getBanks",value:function(){return this._banks}},{key:"getBanksCount",value:function(){return this._banks.length}},{key:"setBanks",value:function(e,t){this._banks=t.slice(),this._notify(e,{isLoading:!1})}}])&&Oe(t.prototype,n),r&&Oe(t,r),i}(he);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Re(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xe(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var o=De(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(i,e);var t,n,r,o=Le(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._formFields=K(),e._errorMessages=[],e}return t=i,(n=[{key:"mapFieldsForServer",value:function(){var e={};return this.getFields().forEach((function(t){return e[t.name]=t.value})),e}},{key:"resetFields",value:function(){this._formFields=K()}},{key:"getField",value:function(e){return this._formFields.find((function(t){return t.id===e}))}},{key:"getFields",value:function(){return this._formFields}},{key:"setFields",value:function(e){return this._formFields=e}},{key:"getFieldsCount",value:function(){return this._formFields.length}},{key:"getErrorMessages",value:function(){return this._errorMessages}},{key:"setError",value:function(e){this._errorMessages.includes(e)||this._errorMessages.push(e)}},{key:"deleteError",value:function(e){this._errorMessages=this._errorMessages.filter((function(t){return e!==t}))}},{key:"resetError",value:function(){this._errorMessages=[]}},{key:"setField",value:function(e,t){this._formFields=this._formFields.slice().concat([t]),this._notify(e)}},{key:"updateField",value:function(e,t){var n=this._formFields.findIndex((function(e){return e.id===t.id}));if(-1===n)throw new Error("Can't update nonexistent field");this._formFields=[].concat(Re(this._formFields.slice(0,n)),[t],Re(this._formFields.slice(n+1))),this._notify(e,t)}},{key:"deleteField",value:function(e,t){var n=this._formFields.findIndex((function(e){return e.id===t}));if(-1===n)throw new Error("Can't delete nonexistent field");this._formFields=[].concat(Re(this._formFields.slice(0,n)),Re(this._formFields.slice(n+1))),this._notify(e,t)}},{key:"isFormValid",value:function(){return this._formFields.some((function(e){return!e.isValid}))}}])&&Be(t.prototype,n),r&&Be(t,r),i}(he);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function qe(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){if(t&&("object"===He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(i,e);var t,n,r,o=Ke(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._formTransactionFields=Y(),e._errorTransactionMessages=[],e}return t=i,(n=[{key:"mapFieldsForServer",value:function(){var e={};return this.getFields().forEach((function(t){return e[t.name]=t.value})),e}},{key:"resetFields",value:function(){this._formTransactionFields=Y()}},{key:"getField",value:function(e){return this._formTransactionFields.find((function(t){return t.id===e}))}},{key:"getFields",value:function(){return this._formTransactionFields}},{key:"setFields",value:function(e){return this._formTransactionFields=e}},{key:"getFieldsCount",value:function(){return this._formTransactionFields.length}},{key:"getErrorMessages",value:function(){return this._errorTransactionMessages}},{key:"resetErrorMessages",value:function(){return this._errorTransactionMessages=[]}},{key:"setError",value:function(e){this._errorTransactionMessages.includes(e)||this._errorTransactionMessages.push(e)}},{key:"deleteError",value:function(e){this._errorTransactionMessages=this._errorTransactionMessages.filter((function(t){return e!==t}))}},{key:"resetError",value:function(){this._errorTransactionMessages=[]}},{key:"setField",value:function(e,t){this._formTransactionFields=this._formTransactionFields.slice().concat([t]),this._notify(e)}},{key:"setTransaction",value:function(e,t){this._notify(e,{isLoading:!1,accountId:t})}},{key:"updateField",value:function(e,t){var n=this._formTransactionFields.findIndex((function(e){return e.id===t.id}));if(-1===n)throw new Error("Can't update nonexistent field");this._formFields=[].concat(qe(this._formTransactionFields.slice(0,n)),[t],qe(this._formTransactionFields.slice(n+1))),this._notify(e,t)}},{key:"deleteField",value:function(e,t){var n=this._formTransactionFields.findIndex((function(e){return e.id===t}));if(-1===n)throw new Error("Can't delete nonexistent field");this._formTransactionFields=[].concat(qe(this._formTransactionFields.slice(0,n)),qe(this._formTransactionFields.slice(n+1))),this._notify(e,t)}},{key:"isFormValid",value:function(){return this._formTransactionFields.some((function(e){return!e.isValid}))}}])&&Ve(t.prototype,n),r&&Ve(t,r),i}(he);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ze(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qe(this,n)}}function Qe(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(i,e);var t,n,r,o=Ge(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._myCurrencies={},e._allCurrencies=[],e._realtimeCurrencies=[],e._currentFromCurrency=null,e._currentToCurrency=null,e}return t=i,(n=[{key:"setIsCurrenciesLoading",value:function(e,t){this._notify(e,t)}},{key:"getAllCurrencies",value:function(){return this._allCurrencies}},{key:"getMyCurrencies",value:function(){return this._myCurrencies}},{key:"setCurrencies",value:function(e,t){var n=t[0],r=t[1];this._allCurrencies=n.slice(),this._myCurrencies=Object.assign({},r),this._notify(e,{isLoading:!1})}},{key:"setMyCurrencies",value:function(e,t){this._myCurrencies=[].concat(t),this._notify(e,{isLoading:!1})}},{key:"setRealtimeCurrencies",value:function(e,t){this._realtimeCurrencies.push(t),this._realtimeCurrencies.length>20&&this._realtimeCurrencies.splice(0,1),this._notify(e,{realtimeCurrenciesChange:!0})}},{key:"getRealtimeCurrencies",value:function(){return this._realtimeCurrencies}},{key:"setCurrentFromCurrency",value:function(e,t){this._currentFromCurrency=t,this._notify(e,{currentCurrencyTypeChange:!0,resetInputValue:!0})}},{key:"getCurrentFromCurrency",value:function(){return this._currentFromCurrency?this._currentFromCurrency:Object.keys(this._myCurrencies)[0]}},{key:"setCurrentToCurrency",value:function(e,t){this._currentToCurrency=t,this._notify(e,{currentCurrencyTypeChange:!0})}},{key:"getCurrentToCurrency",value:function(){return this._currentToCurrency?this._currentToCurrency:this._allCurrencies[0]}}])&&$e(t.prototype,n),r&&$e(t,r),i}(he);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},it(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var o=at(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){if(t&&("object"===tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(i,e);var t,n,r,o=ct(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._formCurrencyFields=Z(),e._errorCurrencyMessages=[],e}return t=i,(n=[{key:"mapFieldsForServer",value:function(){var e={};return this.getFields().forEach((function(t){return e[t.name]=t.value})),e}},{key:"resetFields",value:function(){this._formCurrencyFields=Z()}},{key:"getField",value:function(e){return this._formCurrencyFields.find((function(t){return t.id===e}))}},{key:"getFields",value:function(){return this._formCurrencyFields}},{key:"setFields",value:function(e){return this._formCurrencyFields=e}},{key:"getFieldsCount",value:function(){return this._formCurrencyFields.length}},{key:"getErrorMessages",value:function(){return this._errorCurrencyMessages}},{key:"resetErrorMessages",value:function(){return this._errorCurrencyMessages=[]}},{key:"setError",value:function(e){this._errorCurrencyMessages.includes(e)||this._errorCurrencyMessages.push(e)}},{key:"deleteError",value:function(e){this._errorCurrencyMessages=this._errorCurrencyMessages.filter((function(t){return e!==t}))}},{key:"resetError",value:function(){this._errorCurrencyMessages=[]}},{key:"setField",value:function(e,t){this._formCurrencyFields=this._formCurrencyFields.slice().concat([t]),this._notify(e)}},{key:"setCurrency",value:function(e,t){this._notify(e,{isLoading:!1,accountId:t})}},{key:"updateField",value:function(e,t){var n=this._formCurrencyFields.findIndex((function(e){return e.id===t.id}));if(-1===n)throw new Error("Can't update nonexistent field");this._formCurrencyFields=[].concat(nt(this._formCurrencyFields.slice(0,n)),[t],nt(this._formCurrencyFields.slice(n+1)));var r=t;this._notify(e,{field:r,currentCurrencyTypeChange:!0})}},{key:"deleteField",value:function(e,t){var n=this._formCurrencyFields.findIndex((function(e){return e.id===t}));if(-1===n)throw new Error("Can't delete nonexistent field");this._formCurrencyFields=[].concat(nt(this._formCurrencyFields.slice(0,n)),nt(this._formCurrencyFields.slice(n+1))),this._notify(e,t)}},{key:"isFormValid",value:function(){return this._formCurrencyFields.some((function(e){return!e.isValid}))}}])&&ot(t.prototype,n),r&&ot(t,r),i}(he),lt=function(e){var t=e.method,n=e.field,r=e.currentAccount;switch(t){case H:return!!n.value.trim();case q:return n.value.trim().length>=J;case N:return n.value.trim().length===W;case U:return function(e,t){return e.value.trim()<=t.balance&&t.balance>0}(n,r);case V:return function(e,t){return e.value.trim()!==t.account}(n,r)}},ft=/^[а-яА-ЯёЁa-zA-Z0-9-]+$/g,yt=/^[0-9]+$/g,dt=function(e){return e=e.split("").filter((function(e){return null!==e.match(yt)})).join("").trim().toLowerCase().replace(/\b0+/g,"")};function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=new de(new ce("http://localhost:5000","ws://localhost:5000"),new se(y,window.localStorage)),bt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ht(this,"_handleModelEvent",(function(e,t){switch(e){case _:n._view.updatePatch(t);break;case g:n._view.updateMinor(t);break;case w:n._view.updateMajor(t)}})),ht(this,"handleDnDChange",(function(e){n._api.setShowAccountOrder(e)})),ht(this,"handleDnDChangeHistory",(function(e){n._api.setShowHistoryOrder(e)})),ht(this,"handleDnDChangeCurrency",(function(e){n._api.setShowCurrencyOrder(e)})),ht(this,"handleSortTypeChange",(function(e){n.getCurrentSortType()!==e&&n._accountsModel.setSortType(g,e)})),ht(this,"handleProfileAccountClick",(function(e){n._router.navigateTo("/account/".concat(e))})),ht(this,"handleDropdownChange",(function(e){var t;switch(e){case F:t=F;break;case B:t=B;break;case x:t=x}if(!t)throw new Error("Can't create nonexistent field: ".concat(e));n.handleSortTypeChange(t)})),ht(this,"handleBackToAccountsButtonClick",(function(){n._router.navigateTo("/accounts")})),ht(this,"handleToHistoryClick",(function(e){n._router.navigateTo("/history/".concat(e))})),ht(this,"handleToAccountClick",(function(){var e=n.getCurrentAccount().account;n._router.navigateTo("/account/".concat(e))})),ht(this,"handleFieldChange",(function(e,t){var r=n._formModel.getField(e);if(!r)throw new Error("Can't find nonexistent field: ".concat(r));[R.name,R.password].includes(r.title)&&(t=function(e){return e.split("").filter((function(e){return null!==e.match(ft)})).join("").trim().toLowerCase().replace(/^-+/g,"").replace(/-+$/g,"").replace(/ +(?= )/g,"").replace(/-+/g,"-")}(t)),r.value=t,r.isTouched=!0;var o=n._validateField(r);r.isValid=o,n._formModel.updateField(_,r)})),ht(this,"handleTransactionFieldChange",(function(e,t){var r=n._formTransactionModel.getField(e);if(!r)throw new Error("Can't find nonexistent field: ".concat(r));[R.paymentSum].includes(r.title)&&(t=dt(t)),r.value=t,r.isTouched=!0;var o=n._validateTransactionField(r);r.isValid=o,n._formTransactionModel.updateField(_,r)})),ht(this,"handleCurrencyFieldChange",(function(e,t){var r=n._formCurrencyModel.getField(e);if(!r)throw new Error("Can't find nonexistent field: ".concat(r));[R.sum].includes(r.title)&&(t=dt(t)),r.value=t,r.isTouched=!0;var o=n._validateCurrencyField(r);r.isValid=o,n._formCurrencyModel.updateField(g,r)})),ht(this,"handleAddAccountClick",(function(){var e=n._formModel.mapFieldsForServer();n._handleViewAction(b,g,e)})),ht(this,"handleNewAccountButtonClick",(function(){n._handleViewAction(m,g)})),ht(this,"handleTransactionClick",(function(){var e=n.getCurrentAccount().account,t=n.getMappedFormFieldsTransactionModel(),r=t.paymentNumber,o=t.paymentSum;n._fetchTransaction({from:e,to:r,amount:o})})),ht(this,"handleCurrencyClick",(function(){var e=n.getCurrentFromCurrency(),t=n.getCurrentToCurrency(),r=n.getMappedFormFieldsCurrencyModel().paymentSum;n._fetchNewCurrency({from:e,to:t,amount:r})})),ht(this,"handleCurrencyChange",(function(e,t){"from"===e&&n._currencyModel.setCurrentFromCurrency(g,t),"to"===e&&n._currencyModel.setCurrentToCurrency(g,t)})),ht(this,"getCurrentSortType",(function(){return n._accountsModel.getCurrentSortType()})),this._view=t,this._api=vt,this._router=new ee(this),this._accountsModel=new Ce,this._banksModel=new Pe,this._formModel=new Ie,this._formTransactionModel=new Je,this._currencyModel=new et,this._formCurrencyModel=new st,this._accountsModel.addObserver(this._handleModelEvent),this._banksModel.addObserver(this._handleModelEvent),this._formModel.addObserver(this._handleModelEvent),this._formTransactionModel.addObserver(this._handleModelEvent),this._currencyModel.addObserver(this._handleModelEvent),this._formCurrencyModel.addObserver(this._handleModelEvent),this._wsTransfer=null}var t,n,r;return t=e,(n=[{key:"resetWebSocketTransfer",value:function(){this._wsTransfer=null}},{key:"_validateField",value:function(e){if(!e.required)return!0;if(!e)throw new Error("Can't find nonexistent field: ".concat(e));var t=e.validation;for(var n in t){var r=e.validation[n];if(t.hasOwnProperty(n)&&!lt({method:n,field:e})&&!e.deletedField)return this._formModel.setError(r),!1;this._formModel.deleteError(r)}return!0}},{key:"_validateTransactionField",value:function(e){if(!e.required)return!0;if(!e)throw new Error("Can't find nonexistent field: ".concat(e));var t=e.validation,n=this.getCurrentAccount();for(var r in t){var o=e.validation[r];if(t.hasOwnProperty(r)&&!lt({method:r,field:e,currentAccount:n})&&!e.deletedField)return this._formTransactionModel.setError(o),!1;this._formTransactionModel.deleteError(o)}return!0}},{key:"_validateCurrencyField",value:function(e){if(!e.required)return!0;if(!e)throw new Error("Can't find nonexistent field: ".concat(e));var t=e.validation,n=this.getCurrentFromCurrency(),r={balance:this.getMyCurrencies()[n].amount};for(var o in t){var i=e.validation[o];if(t.hasOwnProperty(o)&&!lt({method:o,field:e,currentAccount:r})&&!e.deletedField)return this._formCurrencyModel.setError(i),!1;this._formCurrencyModel.deleteError(i)}return!0}},{key:"_handleViewAction",value:function(e,t,n){var r=this;switch(e){case b:this._view.addAccountButtonComponent.setViewState(C),this._api.login(n).then((function(e){var t,n=null==e||null===(t=e.payload)||void 0===t?void 0:t.token;if(!n)throw new Error("Authentication error");r._api.setItem({key:"auth",subKey:"token",value:n}),r._router.navigateTo("accounts")})).catch((function(e){console.error(e),l.toast("".concat(e.message))})).finally((function(){r._view.addAccountButtonComponent.setViewState(k)}));break;case m:this._fetchNewAccount()}}},{key:"_fetchNewAccount",value:function(){var e=this,t=this._api.getToken();null!==t?(this._view.newAccountComponent.setViewState(C),this._accountsModel.setIsAccountsLoading(g,{isLoading:!0}),this._api.addAccount(t).then((function(t){e._accountsModel.setAccount(g,t)})).catch((function(t){console.error(t.message),l.toast(t.message);var n=e._accountsModel.getAccounts();e._accountsModel.setAccounts(g,n)})).finally((function(){e._view.newAccountComponent.setViewState(k)}))):this.resetRoute()}},{key:"_fetchAccount",value:function(e){var t=this,n=this._api.getToken();null!==n?(this._accountsModel.setIsAccountsLoading(w,{isLoading:!0}),this._api.getAccount({token:n,accountId:e}).then((function(e){t._accountsModel.setCurrentAccount(w,e)})).catch((function(e){console.error(e.message),l.toast(e.message),t._accountsModel.setCurrentAccount(w,{})}))):this.resetRoute()}},{key:"_fetchAccounts",value:function(){var e=this,t=this._api.getToken();null!==t?(this._accountsModel.setIsAccountsLoading(w,{isLoading:!0}),this._api.getAccounts(t).then((function(t){e._accountsModel.setAccounts(w,t)})).catch((function(t){console.error(t.message),l.toast(t.message),e._accountsModel.setAccounts(w,[])}))):this.resetRoute()}},{key:"_fetchCurrency",value:function(){var e=this,t=this._api.getToken();null!==t?(this._currencyModel.setIsCurrenciesLoading(w,{isLoading:!0}),this._api.getCurrencies(t).then((function(t){e._currencyModel.setCurrencies(w,t)})).catch((function(t){console.error(t.message),l.toast(t.message),e._currencyModel.setCurrencies(w,[])})),this._wsTransfer=this._api.getWebSocketConnectionTransfer(),this._wsTransfer.onmessage=function(t){e._currencyModel.setRealtimeCurrencies(g,JSON.parse(t.data))}):this.resetRoute()}},{key:"_fetchTransaction",value:function(e){var t=this,n=this._api.getToken();null!==n?(this._view.addTransactionButtonComponent.setViewState(C),this._accountsModel.setIsAccountsLoading(w,{isLoading:!0}),this._api.newTransaction(e,n).then((function(e){t._router.navigateTo("/accounts")})).catch((function(e){console.error(e.message),l.toast(e.message),t._fetchCurrency()})).finally((function(){t._view.addTransactionButtonComponent.setViewState(k)}))):this.resetRoute()}},{key:"_fetchNewCurrency",value:function(e){var t=this,n=this._api.getToken();null!==n?(this._view.currencyButton.setViewState(C),this._accountsModel.setIsAccountsLoading(w,{isLoading:!0}),this._api.newCurrency(e,n).then((function(e){})).catch((function(e){console.error(e.message),l.toast(e.message)})).finally((function(){t._view.currencyButton.setViewState(k),t._router.navigateTo("/accounts")}))):this.resetRoute()}},{key:"_fetchBanks",value:function(){var e=this,t=this._api.getToken();null!==t?(this._banksModel.setIsBanksLoading(w,{isLoading:!0}),this._api.getBanks(t).then((function(t){e._banksModel.setBanks(w,t)})).catch((function(t){console.error(t.message),l.toast(t.message),e._banksModel.setBanks(w,[])}))):this.resetRoute()}},{key:"accountsRoute",value:function(){this._fetchAccounts()}},{key:"currencyRoute",value:function(){this._fetchCurrency()}},{key:"banksRoute",value:function(){this._fetchBanks()}},{key:"resetRoute",value:function(){this._api.resetStorage(),this._router.navigateTo("/"),this._view.updateMajor()}},{key:"accountIdRoute",value:function(e){this._fetchAccount(e)}},{key:"accountIdHistory",value:function(e){this._fetchAccount(e)}},{key:"_sortAccounts",value:function(e,t){switch(t){case F:return e.sort(l.sortAccountsByNumber);case B:return e.sort(l.sortAccountsByBalance);case x:return e.sort(l.sortAccountsByTransaction);default:return e}}},{key:"getAccounts",value:function(){var e=this._accountsModel.getAccounts(),t=this.getCurrentSortType();return this._sortAccounts(e,t)}},{key:"getAccountsCount",value:function(){return this._accountsModel.getAccountsCount()}},{key:"getCurrentAccount",value:function(){return this._accountsModel.getCurrentAccount()}},{key:"getFormField",value:function(e){return this._formModel.getField(e)}},{key:"getTransactionFormField",value:function(e){return this._formTransactionModel.getField(e)}},{key:"getLoginFormFields",value:function(){return this._formModel.getFields()}},{key:"getTransactionFormFields",value:function(){return this._formTransactionModel.getFields()}},{key:"getCurrencyFormFields",value:function(){return this._formCurrencyModel.getFields()}},{key:"getCurrencyFormField",value:function(e){return this._formCurrencyModel.getField(e)}},{key:"resetFormFields",value:function(){return this._formModel.resetFields()}},{key:"resetTransactionFormFields",value:function(){return this._formTransactionModel.resetFields()}},{key:"getErrorMessages",value:function(){return this._formModel.getErrorMessages()}},{key:"resetTransactionErrorMessages",value:function(){return this._formTransactionModel.resetErrorMessages()}},{key:"getTransactionErrorMessages",value:function(){return this._formTransactionModel.getErrorMessages()}},{key:"getCurrencyErrorMessages",value:function(){return this._formCurrencyModel.getErrorMessages()}},{key:"getCurrentRoute",value:function(){return this._router.getCurrentRoute()}},{key:"getIsAuth",value:function(){return this._api.getIsAuth()}},{key:"getBanks",value:function(){return this._banksModel.getBanks()}},{key:"getBanksCount",value:function(){return this._banksModel.getBanksCount()}},{key:"getShowAccountOrder",value:function(){return this._api.getShowAccountOrder()}},{key:"getShowHistoryOrder",value:function(){return this._api.getShowCurrencyOrder()}},{key:"getShowCurrencyOrder",value:function(){return this._api.getShowCurrencyOrder()}},{key:"getMappedLastYearTransactions",value:function(){return this._api.getMappedLastYearTransactions()}},{key:"getMappedFormFieldsTransactionModel",value:function(){return this._formTransactionModel.mapFieldsForServer()}},{key:"getVerifiedAccounts",value:function(){return this._api.getVerifiedAccounts()}},{key:"getAllCurrencies",value:function(){return this._currencyModel.getAllCurrencies()}},{key:"getMyCurrencies",value:function(){return this._currencyModel.getMyCurrencies()}},{key:"getRealtimeCurrencies",value:function(){return this._currencyModel.getRealtimeCurrencies()}},{key:"getCurrentFromCurrency",value:function(){return this._currencyModel.getCurrentFromCurrency()}},{key:"getCurrentToCurrency",value:function(){return this._currencyModel.getCurrentToCurrency()}},{key:"resetCurrencyFields",value:function(){return this._formCurrencyModel.resetFields()}},{key:"getMappedFormFieldsCurrencyModel",value:function(){return this._formCurrencyModel.mapFieldsForServer()}},{key:"init",value:function(){this._router.init()}}])&&pt(t.prototype,n),r&&pt(t,r),e}();function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _t=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(this instanceof e?this.constructor:void 0)===e)throw new Error("Can't instantiate Abstract, only concrete one.");this._element=null,this._handler={}}var t,n,r;return t=e,(n=[{key:"getElement",value:function(){return this._element||(this._element=wt.createElement(this.getTemplate())),this._element}},{key:"getTemplate",value:function(){throw new Error("Abstract method not implemented: getTemplate")}},{key:"removeElement",value:function(){this._element=null}}])&&mt(t.prototype,n),r&&mt(t,r),e}();function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createElement",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}},{key:"remove",value:function(e){if(null!==e){if(!(e instanceof _t))throw new Error("Can remove only components");e.getElement().remove(),e.removeElement()}}},{key:"render",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;switch(e instanceof _t&&(e=e.getElement()),t instanceof _t&&(n=t.getElement()),r){case d:e.prepend(n);break;case p:e.append(n);break;case h:e.before(n);break;case v:e.after(n)}}},{key:"renderTemplate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;return e instanceof _t&&(e=e.getElement()),e.insertAdjacentHTML(n,t)}},{key:"replace",value:function(e,t){e instanceof _t&&(e=e.getElement()),t instanceof _t&&(t=t.getElement());var n=t.parentElement;if(null===n||null===t||null===e)throw new Error("Can't replace unexisting elements");n.contains(t)&&n.replaceChild(e,t)}}],(n=null)&&gt(t.prototype,n),r&&gt(t,r),e}();function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ot(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Et(e);if(t){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(i,e);var t,n,r,o=jt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'\n    <header class="header"></header>\n  '}}])&&kt(t.prototype,n),r&&kt(t,r),i}(_t);function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rt(e,t)}function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xt(e);if(t){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bt(this,n)}}function Bt(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}var Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(i,e);var t,n,r,o=Ft(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'<main class="main">\n    <section class="container js-main-container"></section>\n    </main>\n  '}},{key:"getMainSectionContainer",value:function(){return document.querySelector(".js-main-container")}}])&&At(t.prototype,n),r&&At(t,r),i}(_t);function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},It(e,t)}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vt(e);if(t){var o=Vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(e,t){if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nt(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}var Ut=[{route:"banks",title:"Банкоматы"},{route:"accounts",title:"Счета"},{route:"currency",title:"Валюта"},{route:"logout",title:"Выйти"}],Kt=function(e,t){return'<div class="container header__container">\n      '.concat(function(e){return e?'<button class="burger js-burger">\n    <span class="burger__line"></span>\n    <span class="burger__line"></span>\n    <span class="burger__line"></span>\n  </button>':""}(t),'\n\n        <a class="header__logo" href="/">\n          <svg width="106" height="34" viewBox="0 0 106 34" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M28.048 24.984C27.152 27.672 25.584 29.768 23.344 31.272C21.104 32.744 18.448 33.48 15.376 33.48C12.464 33.48 9.936 32.824 7.792 31.512C5.648 30.168 3.968 28.28 2.752 25.848C1.568 23.416 0.976 20.52 0.976 17.16C0.976 13.8 1.568 10.904 2.752 8.472C3.968 6.04 5.648 4.168 7.792 2.856C9.936 1.512 12.448 0.839999 15.328 0.839999C21.696 0.839999 25.792 3.448 27.616 8.664L25.264 9.768C24.528 7.56 23.36 5.896 21.76 4.776C20.16 3.624 18.064 3.048 15.472 3.048C13.104 3.048 11.008 3.624 9.184 4.776C7.392 5.896 6 7.512 5.008 9.624C4.016 11.736 3.52 14.248 3.52 17.16C3.52 20.072 4 22.584 4.96 24.696C5.952 26.808 7.328 28.44 9.088 29.592C10.88 30.712 12.976 31.272 15.376 31.272C17.936 31.272 20.112 30.664 21.904 29.448C23.696 28.2 24.944 26.408 25.648 24.072L28.048 24.984ZM43.939 8.52C46.179 8.52 48.147 9.016 49.843 10.008C51.571 11 52.915 12.44 53.875 14.328C54.867 16.184 55.363 18.408 55.363 21C55.363 23.592 54.867 25.832 53.875 27.72C52.915 29.576 51.571 31 49.843 31.992C48.147 32.984 46.179 33.48 43.939 33.48C41.699 33.48 39.715 32.984 37.987 31.992C36.291 31 34.947 29.576 33.955 27.72C32.995 25.832 32.515 23.592 32.515 21C32.515 18.408 32.995 16.184 33.955 14.328C34.947 12.44 36.291 11 37.987 10.008C39.715 9.016 41.699 8.52 43.939 8.52ZM43.939 10.584C41.219 10.584 39.027 11.512 37.363 13.368C35.731 15.224 34.915 17.768 34.915 21C34.915 24.232 35.731 26.776 37.363 28.632C39.027 30.488 41.219 31.416 43.939 31.416C46.659 31.416 48.835 30.488 50.467 28.632C52.131 26.776 52.963 24.232 52.963 21C52.963 17.768 52.131 15.224 50.467 13.368C48.835 11.512 46.659 10.584 43.939 10.584ZM63.4251 4.344C62.8171 4.344 62.3211 4.168 61.9371 3.816C61.5851 3.432 61.4091 2.936 61.4091 2.328C61.4091 1.72 61.5851 1.24 61.9371 0.887999C62.3211 0.503998 62.8171 0.311997 63.4251 0.311997C64.0331 0.311997 64.5131 0.503998 64.8651 0.887999C65.2491 1.24 65.4411 1.72 65.4411 2.328C65.4411 2.936 65.2491 3.432 64.8651 3.816C64.5131 4.168 64.0331 4.344 63.4251 4.344ZM64.6251 9V33H62.2251V9H64.6251ZM73.1939 33V9H75.3539L75.4979 13.8C76.2339 12.104 77.4019 10.808 79.0019 9.912C80.6019 8.984 82.4099 8.52 84.4259 8.52C87.0819 8.52 89.2739 9.272 91.0019 10.776C92.7299 12.28 93.5939 14.504 93.5939 17.448V33H91.1939V18.216C91.1939 15.592 90.5379 13.672 89.2259 12.456C87.9139 11.24 86.2339 10.632 84.1859 10.632C82.6819 10.632 81.2739 10.984 79.9619 11.688C78.6499 12.36 77.5939 13.352 76.7939 14.664C75.9939 15.976 75.5939 17.576 75.5939 19.464V33H73.1939ZM102.889 29.064C103.529 29.064 104.041 29.272 104.425 29.688C104.841 30.072 105.049 30.584 105.049 31.224C105.049 31.864 104.841 32.392 104.425 32.808C104.041 33.192 103.529 33.384 102.889 33.384C102.249 33.384 101.721 33.192 101.305 32.808C100.921 32.392 100.729 31.864 100.729 31.224C100.729 30.584 100.921 30.072 101.305 29.688C101.721 29.272 102.249 29.064 102.889 29.064Z" fill="white"/>\n          </svg>\n        </a>\n\n    ').concat(function(e,t){return e?'<nav class="header__nav">\n      <ul class="header__list">\n      '.concat(Ut.map((function(e){return function(e,t){var n=e.route===t;return'<li class="header__item">\n            <a class="header__link '.concat(n?"header__link--active":"",'" href="/').concat(e.route,'" id="test-href-').concat(e.title,'">').concat(e.title,"</a>\n          </li>")}(e,t)})).join(""),"\n      </ul>\n    </nav>"):""}(t,e),"\n  </div>")},Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(i,e);var t,n,r,o=Ht(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Nt(n=o.call(this)),"setBurgerClickHandler",(function(){var e=document.querySelector(".js-burger"),t=document.querySelector(".header__nav");function n(){e&&e.classList.remove("active"),t&&t.classList.remove("active")}e&&(document.body.addEventListener("click",(function(e){e.target.closest(".active")||n()})),e.addEventListener("click",(function(){e.classList.contains("active")?n():(e&&e.classList.add("active"),t&&t.classList.add("active"))})),window.addEventListener("resize",(function(){n()})))})),n._currentRoute=e,n._isAuth=t,n}return t=i,(n=[{key:"getHeaderContainer",value:function(){return this.getElement().querySelector(".header__container")}},{key:"getTemplate",value:function(){return Kt(this._currentRoute,this._isAuth)}}])&&Dt(t.prototype,n),r&&Dt(t,r),i}(_t);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return $t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$t(e,t)}function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qt(e);if(t){var o=Qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gt(this,n)}}function Gt(e,t){if(t&&("object"===Zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(i,e);var t,n,r,o=zt(i);function i(){return Jt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getTemplate",value:function(){return"\n    <div class=container>\n      There are no data in our database\n    </div>\n  "}}])&&Wt(t.prototype,n),r&&Wt(t,r),i}(_t);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cn(e);if(t){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return on(this,n)}}function on(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}var un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(i,e);var t,n,r,o=rn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'<div class="login">\n        <div class="login__container">\n            <h1 class="section-title">Вход в аккаунт</h1>\n            <form class="login__form js-form-container"></form>\n        </div>\n    </div>\n  '}},{key:"getFormContainer",value:function(){return document.querySelector(".js-form-container")}}])&&tn(t.prototype,n),r&&tn(t,r),i}(_t);function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fn(e,t)}function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pn(e);if(t){var o=pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dn(this,n)}}function dn(e,t){if(t&&("object"===an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pn(e){return pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pn(e)}var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(i,e);var t,n,r,o=yn(i);function i(){return sn(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getTemplate",value:function(){return'\n        <div class="loader"></div>\n  '}}])&&ln(t.prototype,n),r&&ln(t,r),i}(_t);function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mn(e,t)}function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn(e);if(t){var o=wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gn(this,n)}}function gn(e,t){if(t&&("object"===vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wn(e){return wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wn(e)}var Cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(i,e);var t,n,r,o=_n(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'\n    <div class="errors-container"></div>\n  '}},{key:"getErrorsContainer",value:function(){return document.querySelector(".errors-container")}}])&&bn(t.prototype,n),r&&bn(t,r),i}(_t);function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e,t){return jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jn(e,t)}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tn(e);if(t){var o=Tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Tn(e)}var Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(i,e);var t,n,r,o=Sn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._errors=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._errors,t=e.map((function(e){return function(e){return'\n        <p class="login__error">\n            '.concat(e,"\n        </p>\n  ")}(e)})).join(""),"\n    <div>\n      ".concat(t,"\n    </div>\n  ");var e,t}}])&&On(t.prototype,n),r&&On(t,r),i}(_t);function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e,t){return Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fn(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ln(e);if(t){var o=Ln(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xn(this,n)}}function xn(e,t){if(t&&("object"===An(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ln(e){return Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ln(e)}var Mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(i,e);var t,n,r,o=Bn(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._state={},e}return t=i,n=[{key:"restoreHandlers",value:function(){throw new Error("Abstract method not implemented: restoreHandlers")}},{key:"updateData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(this._state=Object.assign({},this._data,e),t||this.updateElement())}},{key:"updateElement",value:function(){var e=this.getElement(),t=e.parentElement,n=e.scrollTop;this.removeElement();var r=this.getElement();t.replaceChild(r,e),r.scrollTop=n,this.restoreHandlers()}}],n&&Rn(t.prototype,n),r&&Rn(t,r),i}(_t);function Dn(e){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hn(e,t)}function qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Un(e);if(t){var o=Un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nn(this,n)}}function Nn(e,t){if(t&&("object"===Dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Un(e){return Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Un(e)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(i,e);var t,n,r,o=qn(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vn(r=o.call(this)),"_accountClickHandler",(function(e){e.preventDefault(),r._account?r._handler.click(r._account):r._handler.click()})),r._title=e,r._state={isAdding:!1,isDisabled:t},r._handler={},r._account=n,r}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._title,t=this._state,n=t.isAdding,r=t.isDisabled,o=n?'<div class="button-loader"></div><div>'.concat(e,"</div>"):"".concat(e),'\n      <div class="button-login-container">\n        <button id="test-login-button" class="button-submit js-button" '.concat(function(e){return e?"disabled":""}(r),">\n            ").concat(o,"\n        </button>\n      </div>\n  ");var e,t,n,r,o}},{key:"restoreHandlers",value:function(){this.setAccountClickHandler(this._handler.click)}},{key:"setAccountClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-button").addEventListener("click",this._accountClickHandler)}},{key:"setViewState",value:function(e){var t=this;switch(e){case C:this.updateData({isDisabled:!0,isAdding:!0});break;case k:t.updateData({isAdding:!1})}this.updateElement()}}])&&In(t.prototype,n),r&&In(t,r),i}(Mn);function Yn(e){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,t){return Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wn(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qn(e);if(t){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zn(this,n)}}function zn(e,t){if(t&&("object"===Yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gn(e)}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(i,e);var t,n,r,o=$n(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zn(this,i),Xn(Gn(t=o.call(this)),"_changeHandler",(function(e){e.preventDefault(),t._handler.change(e.target.dataset.fieldid,e.target.value)})),t._field=e,t._isPassword=n,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._field,t=this._isPassword,'\n  <label class="login__label js-label '.concat((n=e.isTouched,r=e.isValid,n?r?"login__label--success":"login__label--error":""),'">\n    <span class="login__span">').concat(e.title,"</span>\n      <input data-fieldid=").concat(e.id,' class="login__input js-input"\n      value="').concat(e.value,'" ').concat(t?'type="password" id="test-user-password" autocomplete="current-password"':'type="text" id="test-user-login"  autocomplete="username"',' placeholder="Введите ').concat(e.title,'" required >\n  </label>\n  ');var e,t,n,r}},{key:"_setValid",value:function(e){e.target.closest(".js-label").classList.remove("login__label--error")}},{key:"setChangeHandler",value:function(e){var t=this;this._handler.change=e,this.getElement().querySelector(".js-input").addEventListener("focusout",this._changeHandler),this.getElement().querySelector(".js-input").addEventListener("focus",(function(e){return t._setValid(e)}))}}])&&Jn(t.prototype,n),r&&Jn(t,r),i}(_t);function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rr(e,t){return rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rr(e,t)}function or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ur(e);if(t){var o=ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ir(this,n)}}function ir(e,t){if(t&&("object"===tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cr(e)}function cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}var ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(i,e);var t,n,r,o=or(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(cr(t=o.call(this)),"_changeHandler",(function(e){e.preventDefault(),t._handler.change(e.target.dataset.fieldid,e.target.value)})),t._field=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._field,'\n  <label class="login__label js-label '.concat((t=e.isTouched,n=e.isValid,t?n?"login__label--success":"login__label--error":""),'">\n    <span class="login__span">').concat(e.title,"</span>\n      <input data-fieldid=").concat(e.id,' class="login__input js-input"\n      value="').concat(e.value,'" type="number" placeholder="Введите ').concat(e.title,'" required data-testid="test-transaction-input" >\n  </label>\n  ');var e,t,n}},{key:"_setValid",value:function(e){e.target.closest(".js-label").classList.remove("login__label--error")}},{key:"setChangeHandler",value:function(e){var t=this;this._handler.change=e,this.getElement().querySelector(".js-input").addEventListener("focusout",this._changeHandler),this.getElement().querySelector(".js-input").addEventListener("focus",(function(e){return t._setValid(e)}))}}])&&nr(t.prototype,n),r&&nr(t,r),i}(_t);function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e,t){return fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fr(e,t)}function yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hr(e);if(t){var o=hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dr(this,n)}}function dr(e,t){if(t&&("object"===sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pr(e)}function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e){return hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hr(e)}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(i,e);var t,n,r,o=yr(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),vr(pr(n=o.call(this)),"_changeHandler",(function(e){e.preventDefault(),n._handler.change(e.target.dataset.fieldid,e.target.value)})),vr(pr(n),"_changeHandlerDropdown",(function(e){e.preventDefault(),n._handler.changeDropdown(e.target.dataset.fieldid,e.target.innerText)})),vr(pr(n),"setChangeHandlerDropdown",(function(e){n._handler.changeDropdown=e})),vr(pr(n),"_closeDropdown",(function(){n.getElement().querySelectorAll(".account-dropdown-container").forEach((function(e){e.classList.remove("account-dropdown-open")})),n.getElement().querySelectorAll(".account-dropdown-menu").forEach((function(e){e.classList.remove("account-dropdown-active")}))})),vr(pr(n),"_dropDownFunc",(function(e){var t=function(t){t.target.classList.contains("account-dropdown-item")&&(e.value=t.target.innerText,n._changeHandlerDropdown(t))};e.classList.contains("js-click-dropdown")&&e.addEventListener("click",(function(r){r.preventDefault(),e.parentElement.nextElementSibling.classList.contains("account-dropdown-active")?(e.parentElement.classList.remove("account-dropdown-open"),e.parentElement.nextElementSibling.classList.remove("account-dropdown-active"),e.parentElement.nextElementSibling.removeEventListener("click",t)):(n._closeDropdown(),e.parentElement.parentElement.classList.add("account-dropdown-open"),e.parentElement.nextElementSibling.classList.add("account-dropdown-active"),e.parentElement.nextElementSibling.addEventListener("click",t))}))})),n._field=e,n._verifiedAccounts=t,n.timer={timerId:null},n.init(),n}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._field,t=this._verifiedAccounts,'<div class="account-dropdown">\n      <div class="account-dropdown-container">\n        <label class="login__label js-label pr-20 '.concat((n=e.isTouched,r=e.isValid,n?r?"login__label--success":"login__label--error":""),'">\n          <span class="login__span">').concat(e.title,"</span>\n          <input data-fieldid=").concat(e.id,' type="number" value="').concat(e.value,'" class="login__input account-dropdown-toggle js-click-dropdown js-input" placeholder="Введите ').concat(e.title,'" required data-testid="test-transaction-dropdown" />\n        </label>\n        ').concat(function(e,t){return'<div class="account-dropdown-menu">\n    <ul class="account-dropdown-group">\n      '.concat(t.map((function(t){return function(e,t){return"<li>\n    <a data-fieldid=".concat(t.id,' class="account-dropdown-item" href="#">').concat(e,"</a>\n  </li>")}(t,e)})).join(""),"\n    </ul>\n  </div>")}(e,t),"\n      </div>\n  </div>");var e,t,n,r}},{key:"_setValid",value:function(e){e.target.closest(".js-label").classList.remove("account__label--error")}},{key:"setChangeHandlerInput",value:function(e){var t=this;this._handler.change=e,this.getElement().querySelector(".js-input").addEventListener("input",(function(e){return function(e,t,n,r){r.timerId&&clearTimeout(r.timerId),r.timerId=setTimeout((function(){e(t)}),n)}(t._changeHandler,e,600,t.timer)})),this.getElement().querySelector(".js-input").addEventListener("focus",(function(e){return t._setValid(e)}))}},{key:"_preventScroll",value:function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault()}},{key:"init",value:function(){var e=this;this.getElement().querySelectorAll(".account-dropdown-toggle").forEach((function(t){return e._dropDownFunc(t)})),window.addEventListener("click",(function(t){null===t.target.closest(".account-dropdown-container")&&e._closeDropdown()})),window.addEventListener("keydown",this._preventScroll)}}])&&lr(t.prototype,n),r&&lr(t,r),i}(_t);function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gr(e,t){return gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gr(e,t)}function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kr(e);if(t){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(e,t){if(t&&("object"===mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}var Or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(i,e);var t,n,r,o=wr(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'\n    <div class="accounts__top js-accounts-top">\n      <h1 class="section-title">Ваши счета</h1>\n  </div>\n  '}},{key:"getAccountsTopContainer",value:function(){return document.querySelector(".js-accounts-top")}}])&&_r(t.prototype,n),r&&_r(t,r),i}(_t);function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Er(e,t){return Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Er(e,t)}function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ar(e);if(t){var o=Ar(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pr(this,n)}}function Pr(e,t){if(t&&("object"===jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}var Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(i,e);var t,n,r,o=Tr(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'<ul class="accounts__list"></ul>'}}])&&Sr(t.prototype,n),r&&Sr(t,r),i}(_t);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xr(e,t)}function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ir(e);if(t){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mr(this,n)}}function Mr(e,t){if(t&&("object"===Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dr(e)}function Dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e){return Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ir(e)}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(i,e);var t,n,r,o=Lr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Hr(Dr(t=o.call(this)),"_changeHandlerDropdown",(function(e){e.preventDefault(),t._handler.changeDropdown(e.target.innerText)})),Hr(Dr(t),"setChangeHandlerDropdown",(function(e){t._handler.changeDropdown=e})),Hr(Dr(t),"_closeDropdown",(function(){t.getElement().querySelectorAll(".dropdown-container").forEach((function(e){e.classList.remove("dropdown-open")})),t.getElement().querySelectorAll(".dropdown-menu").forEach((function(e){e.classList.remove("dropdown-active")}))})),Hr(Dr(t),"_dropDownFunc",(function(e){var n=function(n){n.target.classList.contains("dropdown-item")&&(e.innerText=n.target.innerText,t._changeHandlerDropdown(n))};e.classList.contains("click-dropdown")&&e.addEventListener("click",(function(r){r.preventDefault(),e.nextElementSibling.classList.contains("dropdown-active")?(e.parentElement.classList.remove("dropdown-open"),e.nextElementSibling.classList.remove("dropdown-active"),e.nextElementSibling.removeEventListener("click",n)):(t._closeDropdown(),e.parentElement.classList.add("dropdown-open"),e.nextElementSibling.classList.add("dropdown-active"),e.nextElementSibling.addEventListener("click",n),e.nextElementSibling.addEventListener("keydown",t._keyNavigation),e.nextElementSibling.querySelector(".dropdown-item").focus())}))})),t._currentSortType=e,t._sortList=["По номеру","По балансу","По последней транзакции"],t.init(),t}return t=i,(n=[{key:"getTemplate",value:function(){var e=this,t=!!this._currentSortType;return'<div class="dropdown">\n    <div class="dropdown-container">\n      <div class="dropdown-toggle click-dropdown js-contact-field">'.concat(t?this._currentSortType:"Сортировка",'</div>\n      <div class="dropdown-menu">\n        <ul class="dropdown-group">\n          ').concat(this._sortList.map((function(t){return function(e,t){return'<li>\n    <a class="dropdown-item" href="#">'.concat(e," ").concat(e===t?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M9.00003 16.17L4.83003 12L3.41003 13.41L9.00003 19L21 7.00003L19.59 5.59003L9.00003 16.17Z" fill="#182233"/>\n    </svg>':"","</a>\n  </li>")}(t,e._currentSortType)})).join(""),"\n        </ul>\n      </div>\n    </div>\n  </div>")}},{key:"_preventScroll",value:function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault()}},{key:"_keyNavigation",value:function(e){var t,n,r=null===(t=e.target.parentElement.previousElementSibling)||void 0===t?void 0:t.firstElementChild,o=null===(n=e.target.parentElement.nextElementSibling)||void 0===n?void 0:n.firstElementChild;38===e.keyCode&&r?r.focus():40===e.keyCode&&o&&o.focus()}},{key:"init",value:function(){var e=this;this.getElement().querySelectorAll(".dropdown-toggle").forEach((function(t){return e._dropDownFunc(t)})),window.addEventListener("click",(function(t){null===t.target.closest(".dropdown-container")&&e._closeDropdown()})),window.addEventListener("keydown",this._preventScroll)}}])&&Br(t.prototype,n),r&&Br(t,r),i}(_t);function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kr(e,t)}function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wr(e);if(t){var o=Wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zr(this,n)}}function Zr(e,t){if(t&&("object"===Nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jr(e)}function Jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e){return Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wr(e)}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kr(e,t)}(i,e);var t,n,r,o=Yr(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Создать новый счет",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Vr(this,i),$r(Jr(e=o.call(this)),"_accountClickHandler",(function(t){t.preventDefault(),e._handler.click()})),e._title=t,e._state={isAdding:!1,isDisabled:n},e._handler={},e}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._title,t=this._state,n=t.isAdding,r=t.isDisabled,o=n?'<div class="button-loader button-loader--light"></div><div>'.concat(e,"</div>"):'<div>\n            <svg class="accounts__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M12 4.00001L12 12M12 12L12 20M12 12L20 12M12 12L4 12" stroke="white" stroke-width="2"/>\n            </svg>\n            <span class="accounts__button-title">'.concat(e,"</span>\n        </div>"),'\n      <div class="button-container">\n        <button class="button-filled accounts__button js-button" id="test-new-account" '.concat(function(e){return e?"disabled":""}(r),">\n            ").concat(o,"\n        </button>\n      </div>\n  ");var e,t,n,r,o}},{key:"restoreHandlers",value:function(){this.setAccountClickHandler(this._handler.click)}},{key:"setAccountClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-button").addEventListener("click",this._accountClickHandler)}},{key:"setViewState",value:function(e){var t=this;switch(e){case C:this.updateData({isDisabled:!0,isAdding:!0});break;case k:t.updateData({isAdding:!1})}this.updateElement()}}])&&Ur(t.prototype,n),r&&Ur(t,r),i}(Mn);function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t){return Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xr(e,t)}function eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ro(e);if(t){var o=ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return to(this,n)}}function to(e,t){if(t&&("object"===Gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return no(e)}function no(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ro(e){return ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ro(e)}var oo=function(e){var t;if(e.account){var n=null==e||null===(t=e.transactions[0])||void 0===t?void 0:t.date;return'<li data-testid="test-account-profile">\n    <article class="accounts__item"><span class="accounts__id">'.concat(e.account,'</span><span class="accounts__cost">').concat(l.formatMoney(e.balance),' ₽</span>\n      <div class="accounts__item-bottom">\n        <div class="accounts__transaction"><span class="accounts__last-transaction">\n            Последняя транзакция:<br /></span>\n            ').concat(function(e){return e?'<time class="accounts__date-transaction " datetime="'.concat(l.formatDateTime(e),'">').concat(l.formatDate(e),"</time>"):'<span class="accounts__date-transaction">Отсутствует</span>'}(n),'\n        </div>\n        <button class="button-filled js-account">Открыть</button>\n      </div>\n    </article>\n  </li>\n')}},io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xr(e,t)}(i,e);var t,n,r,o=eo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(no(t=o.call(this)),"_clickProfileHandler",(function(e){e.target.classList.contains("js-account")&&(e.preventDefault(),t._handler.clickProfile(t._account.account))})),t._account=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return oo(this._account)}},{key:"setProfileAccountClickHandler",value:function(e){this._handler.clickProfile=e,this.getElement().addEventListener("click",this._clickProfileHandler)}}])&&Qr(t.prototype,n),r&&Qr(t,r),i}(_t);function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t){return ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ao(e,t)}function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);if(t){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lo(this,n)}}function lo(e,t){if(t&&("object"===co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fo(e)}function fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){return yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yo(e)}var po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ao(e,t)}(i,e);var t,n,r,o=so(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fo(t=o.call(this)),"_accountClickHandler",(function(e){e.preventDefault(),t._handler.click()})),t._currentAccount=e,t}return t=i,(n=[{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-button").addEventListener("click",this._accountClickHandler)}},{key:"getTemplate",value:function(){return e=this._currentAccount,'<div class="account">\n    <div class="account__top js-account-top">\n      <h1 class="section-title">Просмотр счета</h1>\n      <button class="button-filled account__button js-button">\n        <svg class="account__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M7.83 11L11.41 7.41L10 6L4 12L10 18L11.41 16.59L7.83 13H20V11H7.83Z" fill="white"/>\n        </svg>\n        <span class="account__button-title">Вернуться назад</span>\n      </button>\n  </div>\n  <div class="account__content"><span class="account__id">№ '.concat(null==e?void 0:e.account,'</span>\n    <p class="account__balance"><span class="account__balance-title">Баланс</span><span class="account__balance-value">\n    ').concat(l.formatMoney(null==e?void 0:e.balance)," ₽</span></p>\n  </div>\n  </div>\n  ");var e}},{key:"getAccountTopContainer",value:function(){return document.querySelector(".js-account-top")}}])&&uo(t.prototype,n),r&&uo(t,r),i}(_t);function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function vo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _o(e,t){return _o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_o(e,t)}function go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ko(e);if(t){var o=ko(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wo(this,n)}}function wo(e,t){if(t&&("object"===ho(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Co(e)}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}function Oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}(i,e);var t,n,r,o=go(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Oo(Co(e=o.call(this)),"_changeHandler",(function(t){var n,r=[],o=vo(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=Oo({},i.getAttribute("data-index"),i.querySelector(".draggable__item").getAttribute("data-item"));r.push(c)}}catch(e){o.e(e)}finally{o.f()}e._handler.change(r)})),Oo(Co(e),"init",(function(){var t,n=e.getElement().querySelectorAll(".draggable");e.getElement().addEventListener("dragstart",(function(e){t=+e.target.closest(".draggable").getAttribute("data-index")})),e.getElement().addEventListener("dragover",(function(e){(function(e){for(;e=e.parentElement;)if(e.classList.contains("draggable"))return e;return null})(e.target)&&e.preventDefault()})),e.getElement().addEventListener("drop",(function(r){r.preventDefault();var o,i,c,u,a=+r.target.closest(".draggable").getAttribute("data-index");t!==a&&(i=a,c=n[o=t].querySelector(".draggable__item"),u=n[i].querySelector(".draggable__item"),n[o].appendChild(u),n[i].appendChild(c),e._changeHandler(n))}))})),e}return t=i,(n=[{key:"getTemplate",value:function(){return'\n  <div class="account__middle js-body-container">\n    <div data-index="0" class="draggable account__first-component"></div>\n    <div data-index="1" class="draggable account__second-component"></div>\n    <div data-index="2"  class="draggable account__third-component"></div>\n  </div>'}},{key:"setChangeHandler",value:function(e){this._handler.change=e}},{key:"get0Container",value:function(){return this.getElement().querySelector('[data-index="0"]')}},{key:"get1Container",value:function(){return this.getElement().querySelector('[data-index="1"]')}},{key:"get2Container",value:function(){return this.getElement().querySelector('[data-index="2"]')}}])&&mo(t.prototype,n),r&&mo(t,r),i}(_t);function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t){return To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},To(e,t)}function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ro(e);if(t){var o=Ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ao(this,n)}}function Ao(e,t){if(t&&("object"===So(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ro(e)}var Fo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(i,e);var t,n,r,o=Po(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._currentAccount=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return'<div data-item="a" class="account__new-transaction draggable__item" draggable="true">\n    <h2 class="account__title">Новый перевод</h2>\n      <form class="account__form js-form-container">\n      </form>\n  </div>'}},{key:"getFormContainer",value:function(){return document.querySelector(".js-form-container")}}])&&Eo(t.prototype,n),r&&Eo(t,r),i}(_t),Bo=n(143);function xo(e){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}function Lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(e,t){return Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mo(e,t)}function Do(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qo(e);if(t){var o=qo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Io(this,n)}}function Io(e,t){if(t&&("object"===xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ho(e)}function Ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qo(e){return qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qo(e)}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(i,e);var t,n,r,o=Do(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),No(Ho(n=o.call(this)),"_clickHandler",(function(e){e.preventDefault(),n._handler.click(n._currentAccount.account)})),No(Ho(n),"setChart",(function(){null!==n._statisticChart&&(n._statisticChart=null);var e=n.getElement().querySelector(".js-cart-wrap"),t=Object.keys(n._mappedLastHalfYearTransactions);e.height=50*t,n._renderChart(e,n._mappedLastHalfYearTransactions)})),n._currentAccount=e,n._currentAccountId=e.account,n._mappedLastYearProfitTransactions=t.profit[n._currentAccountId],n._mappedLastHalfYearTransactions=l.filterTransactionsInLastHalfYear(n._mappedLastYearProfitTransactions),n._statisticChart=null,n}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._currentAccountId,'<div data-item="b" class="account__dynamic-balance draggable__item" draggable="true">\n  <h2 class="account__title">\n    <a class="link js-to-history" href="/history/'.concat(e,'">Динамика баланса</a></h2>\n    <div class="">\n      <canvas class="js-cart-wrap account__cart" width="684"></canvas>\n    </div>\n  </div>');var e}},{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-to-history").addEventListener("click",this._clickHandler)}},{key:"_renderChart",value:function(e,t){var n=Object.keys(t).map((function(e){return G[e]})),r=Object.values(t);new Bo.Z(e,{type:"bar",data:{labels:n,datasets:[{label:"Баланс",data:r,backgroundColor:"#116acc",hoverBackgroundColor:"#a0c3ff",barThickness:50}]},options:{responsive:!0,scales:{x:{grid:{display:!1},ticks:{font:{size:20,weight:"500",family:"Ubuntu"}}},y:{grid:{display:!1},ticks:{maxTicksLimit:3,font:{size:20,weight:"500",family:"Ubuntu"},autoSkip:!0},position:"right",bounds:"max"}},plugins:{tooltip:{interaction:{mode:"point"},callbacks:{label:function(e){return"Баланс за месяц"}}},legend:{display:!1},chartAreaBorder:{borderColor:"black",borderWidth:2}}},plugins:[{id:"chartAreaBorder",beforeDraw:function(e,t,n){var r=e.ctx,o=e.chartArea,i=o.left,c=o.top,u=o.width,a=o.height;r.save(),r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.strokeRect(i,c,u,a),r.restore()}}]})}}])&&Lo(t.prototype,n),r&&Lo(t,r),i}(_t);function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yo(e,t){return Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yo(e,t)}function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$o(e);if(t){var o=$o(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jo(this,n)}}function Jo(e,t){if(t&&("object"===Uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wo(e)}function Wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $o(e){return $o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$o(e)}var zo=function(e,t){return e.map((function(e){return function(e,t){var n=e.amount,r=e.date,o=e.from,i=e.to,c=t===i;return'<div class="account__table-row">\n      <div class="account__table-item">\n        '.concat(o,'\n      </div>\n      <div class="account__table-item">\n        ').concat(i,'\n      </div>\n    <div class="account__table-item ').concat(c?"account__table-item--green":"account__table-item--red",'">').concat(c?"+":"-"," ").concat(l.formatMoney(n),' ₽</div>\n    <div class="account__table-item"> \n      <time datetime="').concat(l.formatTime(r),'">').concat(l.formatDateTime(r),"</time>\n    </div>\n  </div>")}(e,t)})).join("")},Go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(i,e);var t,n,r,o=Zo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wo(t=o.call(this)),"_clickHandler",(function(e){e.preventDefault(),t._handler.click(t._currentAccount.account)})),t._currentAccount=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._currentAccount,t=e.account,n=e.transactions.splice(-10).reverse(),'<div data-item="c" class="account__history draggable__item" draggable="true">\n      <div class="account__table">\n        <h2 class="account__title">\n          <a class="link js-to-history" href="/history/'.concat(t,'">История переводов</a>\n        </h2>\n        <div class="account__table-header">\n          <div class="account__table-item">\n            Счёт отправителя</div>\n          <div class="account__table-item">\n            Счёт получателя</div>\n          <div class="account__table-item">\n            Сумма</div>\n          <div class="account__table-item">\n            Дата</div>\n      </div>\n\n      <div class="account__table-body">\n        ').concat(n.length?zo(n,t):"Транзакции отсутствуют","\n      </div>\n    </div>\n  </div>");var e,t,n}},{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-to-history").addEventListener("click",this._clickHandler)}}])&&Ko(t.prototype,n),r&&Ko(t,r),i}(_t);function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function Xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e,t){return ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ti(e,t)}function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ii(e);if(t){var o=ii(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ri(this,n)}}function ri(e,t){if(t&&("object"===Qo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oi(e)}function oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(e){return ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ii(e)}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ti(e,t)}(i,e);var t,n,r,o=ni(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xo(this,i),ci(oi(t=o.call(this)),"_accountClickHandler",(function(e){e.preventDefault(),t._handler.click()})),t._title=e,t._state={isAdding:!1,isDisabled:n},t._handler={},t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._title,t=this._state,n=t.isAdding,r=t.isDisabled,o=n?'<div class="button-loader button-loader--light"></div><div>'.concat(e,"</div>"):'<div>\n            <svg class="account__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n               <path d="M20 20H4C2.89543 20 2 19.1046 2 18V5.913C2.04661 4.84255 2.92853 3.99899 4 4H20C21.1046 4 22 4.89543 22 6V18C22 19.1046 21.1046 20 20 20ZM4 7.868V18H20V7.868L12 13.2L4 7.868ZM4.8 6L12 10.8L19.2 6H4.8Z" fill="white"/>\n            </svg>\n            <span class="accounts__button-title">'.concat(e,"</span>\n        </div>"),'\n      <div class="button-container">\n        <button class="button-filled account__button-transaction js-button" '.concat(function(e){return e?"disabled":""}(r),' id="test-new-transaction">\n            ').concat(o,"\n        </button>\n      </div>\n  ");var e,t,n,r,o}},{key:"restoreHandlers",value:function(){this.setClickHandler(this._handler.click)}},{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-button").addEventListener("click",this._accountClickHandler)}},{key:"setViewState",value:function(e){var t=this;switch(e){case C:this.updateData({isDisabled:!0,isAdding:!0});break;case k:t.updateData({isAdding:!1})}this.updateElement()}}])&&ei(t.prototype,n),r&&ei(t,r),i}(Mn);function ai(e){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(e)}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},li(e,t)}function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pi(e);if(t){var o=pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yi(this,n)}}function yi(e,t){if(t&&("object"===ai(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return di(e)}function di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pi(e){return pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pi(e)}var hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&li(e,t)}(i,e);var t,n,r,o=fi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(di(t=o.call(this)),"_accountClickHandler",(function(e){e.preventDefault(),t._handler.click()})),t._currentAccount=e,t}return t=i,(n=[{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-button").addEventListener("click",this._accountClickHandler)}},{key:"getTemplate",value:function(){return e=this._currentAccount,'<div class="account">\n    <div class="account__top js-account-top">\n      <h1 class="section-title">История баланса</h1>\n      <button class="button-filled account__button js-button">\n        <svg class="account__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M7.83 11L11.41 7.41L10 6L4 12L10 18L11.41 16.59L7.83 13H20V11H7.83Z" fill="white"/>\n        </svg>\n        <span class="account__button-title">Вернуться назад</span>\n      </button>\n  </div>\n  <div class="account__content"><span class="account__id">№ '.concat(null==e?void 0:e.account,'</span>\n    <p class="account__balance"><span class="account__balance-title">Баланс</span><span class="account__balance-value">\n    ').concat(l.formatMoney(null==e?void 0:e.balance)," ₽</span></p>\n  </div>\n  </div>\n  ");var e}},{key:"getAccountTopContainer",value:function(){return document.querySelector(".js-account-top")}}])&&si(t.prototype,n),r&&si(t,r),i}(_t);function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function bi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gi(e,t){return gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gi(e,t)}function wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oi(e);if(t){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ci(this,n)}}function Ci(e,t){if(t&&("object"===vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ki(e)}function ki(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gi(e,t)}(i,e);var t,n,r,o=wi(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ji(ki(e=o.call(this)),"_changeHandler",(function(t){var n,r=[],o=bi(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=ji({},i.getAttribute("data-index"),i.querySelector(".draggable__item").getAttribute("data-item"));r.push(c)}}catch(e){o.e(e)}finally{o.f()}e._handler.change(r)})),ji(ki(e),"init",(function(){var t,n=e.getElement().querySelectorAll(".draggable");e.getElement().addEventListener("dragstart",(function(e){t=+e.target.closest(".draggable").getAttribute("data-index")})),e.getElement().addEventListener("dragover",(function(e){(function(e){for(;e=e.parentElement;)if(e.classList.contains("draggable"))return e;return null})(e.target)&&e.preventDefault()})),e.getElement().addEventListener("drop",(function(r){r.preventDefault();var o,i,c,u,a=+r.target.closest(".draggable").getAttribute("data-index");t!==a&&(i=a,c=n[o=t].querySelector(".draggable__item"),u=n[i].querySelector(".draggable__item"),n[o].appendChild(u),n[i].appendChild(c),e._changeHandler(n))}))})),e}return t=i,(n=[{key:"getTemplate",value:function(){return'\n  <div class="history__middle js-body-container">\n    <div data-index="0" class="draggable history__first-component"></div>\n    <div data-index="1" class="draggable history__second-component"></div>\n    <div data-index="2"  class="draggable history__third-component"></div>\n  </div>'}},{key:"setChangeHandler",value:function(e){this._handler.change=e}},{key:"get0Container",value:function(){return this.getElement().querySelector('[data-index="0"]')}},{key:"get1Container",value:function(){return this.getElement().querySelector('[data-index="1"]')}},{key:"get2Container",value:function(){return this.getElement().querySelector('[data-index="2"]')}}])&&_i(t.prototype,n),r&&_i(t,r),i}(_t);function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(e,t){return Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pi(e,t)}function Ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bi(e);if(t){var o=Bi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ri(this,n)}}function Ri(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fi(e)}function Fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bi(e){return Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bi(e)}var xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(i,e);var t,n,r,o=Ai(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fi(n=o.call(this)),"setChart",(function(){var e=n.getElement().querySelector(".js-cart-wrap"),t=Object.keys(n._mappedLastYearProfitTransactions);e.height=50*t,n._renderChart(e,n._mappedLastYearProfitTransactions)})),n._currentAccount=e,n._currentAccountId=e.account,n._mappedLastYearProfitTransactions=t.profit[n._currentAccountId],n._mappedLastYearLossTransactions=t.loss[n._currentAccountId],n}return t=i,n=[{key:"getTemplate",value:function(){return this._currentAccountId,'<div data-item="a" class="history__dynamic-balance draggable__item" draggable="true">\n  <h2 class="history__title">Динамика баланса</h2>\n    <div>\n      <canvas class="js-cart-wrap history__cart" width="1142"></canvas>\n    </div>\n  </div>'}},{key:"_renderChart",value:function(e,t){var n=Object.keys(t).map((function(e){return G[e]})),r=Object.values(t);new Bo.Z(e,{type:"bar",data:{labels:n,datasets:[{label:"Баланс",data:r,backgroundColor:"#116acc",hoverBackgroundColor:"#a0c3ff",barThickness:50}]},options:{responsive:!0,scales:{x:{grid:{display:!1},ticks:{font:{size:20,weight:"500",family:"Ubuntu"}}},y:{grid:{display:!1},ticks:{maxTicksLimit:3,font:{size:20,weight:"500",family:"Ubuntu"},autoSkip:!0,callback:function(e,t,n){return"".concat(e," ₽")}},position:"right",bounds:"max"}},plugins:{tooltip:{interaction:{mode:"point"},callbacks:{label:function(e){return"Баланс за месяц"}}},legend:{display:!1},chartAreaBorder:{borderColor:"black",borderWidth:2}}},plugins:[{id:"chartAreaBorder",beforeDraw:function(e,t,n){var r=e.ctx,o=e.chartArea,i=o.left,c=o.top,u=o.width,a=o.height;r.save(),r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.strokeRect(i,c,u,a),r.restore()}}]})}}],n&&Ti(t.prototype,n),r&&Ti(t,r),i}(_t);function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Di(e,t){return Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Di(e,t)}function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ni(e);if(t){var o=Ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hi(this,n)}}function Hi(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qi(e)}function qi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ni(e){return Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ni(e)}var Vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(i,e);var t,n,r,o=Ii(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qi(n=o.call(this)),"setChart",(function(){var e=n.getElement().querySelector(".js-cart-wrap"),t=Object.keys(n._mappedLastYearProfitTransactions);e.height=50*t,n._renderChart(e,n._mappedLastYearProfitTransactions,n._mappedLastYearLossTransactions)})),n._currentAccount=e,n._currentAccountId=e.account,n._mappedLastYearProfitTransactions=t.profit[n._currentAccountId],n._mappedLastYearLossTransactions=t.loss[n._currentAccountId],n}return t=i,n=[{key:"getTemplate",value:function(){return this._currentAccountId,'<div data-item="b" class="history__dynamic-balance draggable__item" draggable="true">\n  <h2 class="history__title">Соотношение входящих исходящих транзакций</h2>\n    <div>\n      <canvas class="js-cart-wrap history__cart" width="1142"></canvas>\n    </div>\n  </div>'}},{key:"_renderChart",value:function(e,t,n){var r=Object.keys(t).map((function(e){return G[e]})),o=Object.values(t),i=Object.values(n);new Bo.Z(e,{type:"bar",data:{labels:r,datasets:[{label:"Поступление за месяц",data:o,backgroundColor:"#76CA66",hoverBackgroundColor:"#76CA66",barThickness:50},{label:"Списание за месяц",data:i,backgroundColor:"#FD4E5D",hoverBackgroundColor:"#FD4E5D",barThickness:50}]},options:{responsive:!0,scales:{x:{grid:{display:!1},stacked:!0,ticks:{font:{size:20,weight:"500",family:"Ubuntu"}}},y:{grid:{display:!1},ticks:{maxTicksLimit:3,font:{size:20,weight:"500",family:"Ubuntu"},autoSkip:!0,callback:function(e,t,n){return"".concat(e," ₽")}},beginAtZero:!0,position:"right",bounds:"max"}},plugins:{tooltip:{interaction:{mode:"point"},callbacks:{label:function(e){return"Баланс за месяц"}}},legend:{display:!1},chartAreaBorder:{borderColor:"black",borderWidth:2}}},plugins:[{id:"chartAreaBorder",beforeDraw:function(e,t,n){var r=e.ctx,o=e.chartArea,i=o.left,c=o.top,u=o.width,a=o.height;r.save(),r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.strokeRect(i,c,u,a),r.restore()}}]})}}],n&&Mi(t.prototype,n),r&&Mi(t,r),i}(_t);function Ui(e){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yi(e,t){return Yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yi(e,t)}function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$i(e);if(t){var o=$i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ji(this,n)}}function Ji(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wi(e)}function Wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $i(e){return $i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$i(e)}var zi=function(e,t){return e.map((function(e){return function(e,t){var n=e.amount,r=e.date,o=e.from,i=e.to,c=t===i;return'<div class="history__table-row">\n      <div class="history__table-item">\n        '.concat(o,'\n      </div>\n      <div class="history__table-item">\n        ').concat(i,'\n      </div>\n    <div class="history__table-item ').concat(c?"history__table-item--green":"history__table-item--red",'">').concat(c?"+":"-"," ").concat(l.formatMoney(n),' ₽</div>\n    <div class="history__table-item"> \n      <time datetime="').concat(l.formatTime(r),'">').concat(l.formatDateTime(r),"</time>\n    </div>\n  </div>")}(e,t)})).join("")},Gi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yi(e,t)}(i,e);var t,n,r,o=Zi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wi(t=o.call(this)),"_clickHandler",(function(e){e.preventDefault(),t._handler.click(t._currentAccount.account)})),t._currentAccount=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._currentAccount,t=e.account,n=e.transactions.splice(-25).reverse(),'<div data-item="c" class="history__history draggable__item" draggable="true">\n      <div class="history__table">\n        <h2 class="history__title">История переводов</h2>\n        <div class="history__table-header">\n          <div class="history__table-item">\n            Счёт отправителя</div>\n          <div class="history__table-item">\n            Счёт получателя</div>\n          <div class="history__table-item">\n            Сумма</div>\n          <div class="history__table-item">\n            Дата</div>\n      </div>\n\n      <div class="history__table-body">\n        '.concat(n.length?zi(n,t):"Транзакции отсутствуют","\n      </div>\n    </div>\n  </div>");var e,t,n}},{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-to-history").addEventListener("click",this._clickHandler)}}])&&Ki(t.prototype,n),r&&Ki(t,r),i}(_t);function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function Xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ec(e,t){return ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ec(e,t)}function tc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rc(e);if(t){var o=rc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nc(this,n)}}function nc(e,t){if(t&&("object"===Qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rc(e){return rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rc(e)}var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ec(e,t)}(i,e);var t,n,r,o=tc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'<div class="currency">\n    <div class="currency__top js-currency-top">\n      <h1 class="section-title">Валютный обмен</h1>\n    </div>\n  </div>\n  '}},{key:"getAccountTopContainer",value:function(){return document.querySelector(".js-currency-top")}}])&&Xi(t.prototype,n),r&&Xi(t,r),i}(_t);function ic(e){return ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ic(e)}function cc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sc(e,t){return sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sc(e,t)}function lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dc(e);if(t){var o=dc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fc(this,n)}}function fc(e,t){if(t&&("object"===ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yc(e)}function yc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dc(e){return dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dc(e)}function pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(i,e);var t,n,r,o=lc(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),pc(yc(e=o.call(this)),"_changeHandler",(function(t){var n,r=[],o=cc(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=pc({},i.getAttribute("data-index"),i.querySelector(".draggable__item").getAttribute("data-item"));r.push(c)}}catch(e){o.e(e)}finally{o.f()}e._handler.change(r)})),pc(yc(e),"init",(function(){var t,n=e.getElement().querySelectorAll(".draggable");e.getElement().addEventListener("dragstart",(function(e){t=+e.target.closest(".draggable").getAttribute("data-index")})),e.getElement().addEventListener("dragover",(function(e){(function(e){for(;e=e.parentElement;)if(e.classList.contains("draggable"))return e;return null})(e.target)&&e.preventDefault()})),e.getElement().addEventListener("drop",(function(r){r.preventDefault();var o,i,c,u,a=+r.target.closest(".draggable").getAttribute("data-index");t!==a&&(i=a,c=n[o=t].querySelector(".draggable__item"),u=n[i].querySelector(".draggable__item"),n[o].appendChild(u),n[i].appendChild(c),e._changeHandler(n))}))})),e}return t=i,(n=[{key:"getTemplate",value:function(){return'\n  <div class="currency__middle js-body-container">\n    <div data-index="0" class="draggable currency__first-component"></div>\n    <div data-index="1" class="draggable currency__second-component"></div>\n    <div data-index="2"  class="draggable currency__third-component"></div>\n  </div>'}},{key:"setChangeHandler",value:function(e){this._handler.change=e}},{key:"get0Container",value:function(){return this.getElement().querySelector('[data-index="0"]')}},{key:"get1Container",value:function(){return this.getElement().querySelector('[data-index="1"]')}},{key:"get2Container",value:function(){return this.getElement().querySelector('[data-index="2"]')}}])&&ac(t.prototype,n),r&&ac(t,r),i}(_t);function vc(e){return vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(e)}function bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mc(e,t){return mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mc(e,t)}function _c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wc(e);if(t){var o=wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gc(this,n)}}function gc(e,t){if(t&&("object"===vc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wc(e){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wc(e)}var Cc=function(e){return'<div data-item="a" class="currency__your draggable__item" draggable="true">\n    <h2 class="currency__title">Ваши валюты</h2>\n    <ul class="currency__list">\n      '.concat(e.map((function(e){return n=(t=e).amount,r=t.code,'<li class="currency__item">\n    <span class="currency__name">'.concat(r,'</span>\n    <span class="currency__value">').concat(l.formatMoney(n),'</span>\n    <span class="currency__border"></span>\n  </li>');var t,n,r})).join(""),"\n    </ul>\n  </div>")},kc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mc(e,t)}(i,e);var t,n,r,o=_c(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._myCurrencies=Object.values(e),t}return t=i,(n=[{key:"getTemplate",value:function(){return Cc(this._myCurrencies)}}])&&bc(t.prototype,n),r&&bc(t,r),i}(_t);function Oc(e){return Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(e)}function jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e,t){return Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sc(e,t)}function Ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pc(e);if(t){var o=Pc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tc(this,n)}}function Tc(e,t){if(t&&("object"===Oc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pc(e){return Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pc(e)}var Ac=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(i,e);var t,n,r,o=Ec(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'<div data-item="b" class="currency__change draggable__item" draggable="true">\n  <h2 class="currency__title">Изменение курсов в реальном времени</h2>\n    <div class="js-currency-container"></div>\n  </div>'}},{key:"getContainer",value:function(){return document.querySelector(".js-currency-container")}}])&&jc(t.prototype,n),r&&jc(t,r),i}(_t);function Rc(e){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(e)}function Fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bc(e,t){return Bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bc(e,t)}function xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mc(e);if(t){var o=Mc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lc(this,n)}}function Lc(e,t){if(t&&("object"===Rc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mc(e){return Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Mc(e)}var Dc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bc(e,t)}(i,e);var t,n,r,o=xc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return t=i,(n=[{key:"getTemplate",value:function(){return'<div data-item="c" class="currency__convert draggable__item" draggable="true">\n      <div class="currency__table js-currency-table-container">\n        <h2 class="currency__title">Обмен валюты</h2>\n        <div class="currency__block js-currency-block-container"></div>\n    </div>\n  </div>'}},{key:"getCurrencyTableContainer",value:function(){return document.querySelector(".js-currency-table-container")}},{key:"getCurrencyBlockContainer",value:function(){return document.querySelector(".js-currency-block-container")}}])&&Fc(t.prototype,n),r&&Fc(t,r),i}(_t);function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qc(e,t){return qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qc(e,t)}function Nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kc(e);if(t){var o=Kc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vc(this,n)}}function Vc(e,t){if(t&&("object"===Ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uc(e)}function Uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kc(e){return Kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kc(e)}function Yc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zc=function(e,t,n){return'<div class="currency-dropdown">\n        <div class="currency-dropdown-container">\n        <div class="currency-dropdown-toggle click-dropdown js-contact-field">'.concat(t||e[0],'</div>\n        <div class="currency-dropdown-menu">\n            <ul class="currency-dropdown-group">\n            ').concat(e.map((function(e){return function(e,t,n){return"<li>\n      <a data-currencyType=".concat(n,' class="currency-dropdown-item" href="#">').concat(e," ").concat(e===t?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M9.00003 16.17L4.83003 12L3.41003 13.41L9.00003 19L21 7.00003L19.59 5.59003L9.00003 16.17Z" fill="#182233"/>\n    </svg>':"","</a>\n    </li>")}(e,t,n)})).join(""),"\n            </ul>\n        </div>\n        </div>\n    </div>")},Jc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qc(e,t)}(i,e);var t,n,r,o=Nc(i);function i(e){var t,n=e.myCurrencies,r=e.currentFromCurrency,c=e.allCurrencies,u=e.currentToCurrency;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Yc(Uc(t=o.call(this)),"_changeHandlerDropdown",(function(e){e.preventDefault(),t._handler.changeDropdown(e.target.dataset.currencytype,e.target.innerText)})),Yc(Uc(t),"setChangeHandlerDropdown",(function(e){t._handler.changeDropdown=e})),Yc(Uc(t),"_closeDropdown",(function(){t.getElement().querySelectorAll(".currency-dropdown-container").forEach((function(e){e.classList.remove("currency-dropdown-open")})),t.getElement().querySelectorAll(".currency-dropdown-menu").forEach((function(e){e.classList.remove("currency-dropdown-active")}))})),Yc(Uc(t),"_dropDownFunc",(function(e){var n=function(n){n.target.classList.contains("currency-dropdown-item")&&(e.innerText=n.target.innerText,t._changeHandlerDropdown(n))};e.classList.contains("click-dropdown")&&e.addEventListener("click",(function(r){r.preventDefault(),e.nextElementSibling.classList.contains("currency-dropdown-active")?(e.parentElement.classList.remove("currency-dropdown-open"),e.nextElementSibling.classList.remove("currency-dropdown-active"),e.nextElementSibling.removeEventListener("click",n)):(t._closeDropdown(),e.parentElement.classList.add("currency-dropdown-open"),e.nextElementSibling.classList.add("currency-dropdown-active"),e.nextElementSibling.addEventListener("click",n),e.nextElementSibling.addEventListener("keydown",t._keyNavigation),e.nextElementSibling.querySelector(".currency-dropdown-item").focus())}))})),t._myCurrencies=Object.keys(n),t._currentFromCurrency=r,t._allCurrencies=c.filter((function(e){return e!==r})),t._currentToCurrency=u===r?null:u,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._myCurrencies,t=this._currentFromCurrency,n=this._allCurrencies,r=this._currentToCurrency,'<div class="currency__inputs js-form-container">\n        <span class="currency__span">Из</span>\n        '.concat(Zc(e,t,"from"),'\n        <span class="currency__span currency__span--second">в</span>\n        ').concat(Zc(n,r,"to"),"\n        <br>\n    </div>");var e,t,n,r}},{key:"getFormContainer",value:function(){return document.querySelector(".js-form-container")}},{key:"_preventScroll",value:function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault()}},{key:"_keyNavigation",value:function(e){var t,n,r=null===(t=e.target.parentElement.previousElementSibling)||void 0===t?void 0:t.firstElementChild,o=null===(n=e.target.parentElement.nextElementSibling)||void 0===n?void 0:n.firstElementChild;38===e.keyCode&&r?r.focus():40===e.keyCode&&o&&o.focus()}},{key:"init",value:function(){var e=this;this.getElement().querySelectorAll(".currency-dropdown-toggle").forEach((function(t){return e._dropDownFunc(t)})),window.addEventListener("click",(function(t){null===t.target.closest(".currency-dropdown-container")&&e._closeDropdown()})),window.addEventListener("keydown",this._preventScroll)}}])&&Hc(t.prototype,n),r&&Hc(t,r),i}(_t);function Wc(e){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(e)}function $c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gc(e,t){return Gc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gc(e,t)}function Qc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tu(e);if(t){var o=tu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xc(this,n)}}function Xc(e,t){if(t&&("object"===Wc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eu(e)}function eu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tu(e){return tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tu(e)}function nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ru=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gc(e,t)}(i,e);var t,n,r,o=Qc(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Обменять",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $c(this,i),nu(eu(e=o.call(this)),"_clickHandler",(function(t){t.preventDefault(),e._handler.click()})),e._title=t,e._state={isAdding:!1,isDisabled:n},e._handler={},e}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._title,t=this._state,n=t.isAdding,r=t.isDisabled,o=n?'<div class="button-loader button-loader--light"></div><div>'.concat(e,"</div>"):'<div>\n            <span class="accounts__button-title">'.concat(e,"</span>\n        </div>"),'\n      <div class="button-container">\n        <button class="button-filled currency__button js-button" '.concat(function(e){return e?"disabled":""}(r),' id="test-new-transaction-button">\n            ').concat(o,"\n        </button>\n      </div>\n  ");var e,t,n,r,o}},{key:"restoreHandlers",value:function(){this.setClickHandler(this._handler.click)}},{key:"setClickHandler",value:function(e){this._handler.click=e,this.getElement().querySelector(".js-button").addEventListener("click",this._clickHandler)}},{key:"setViewState",value:function(e){var t=this;switch(e){case C:this.updateData({isDisabled:!0,isAdding:!0});break;case k:t.updateData({isAdding:!1})}this.updateElement()}}])&&zc(t.prototype,n),r&&zc(t,r),i}(Mn);function ou(e){return ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(e)}function iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cu(e,t){return cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cu(e,t)}function uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=su(e);if(t){var o=su(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return au(this,n)}}function au(e,t){if(t&&("object"===ou(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}var lu=function(e){return'<ul class="currency__list js-currency-list-container">\n    '.concat(e.map((function(e){return n=(t=e).from,r=t.to,o=t.rate,i=t.change,'<li class="currency__item '.concat(1==i?"currency__item--green":"currency__item--red",'">\n        <span class="currency__name-grey">').concat(n,"/").concat(r,'</span>\n        <span class="currency__value-grey">').concat(l.formatMoney(o),'</span>\n        <span class="currency__border"></span>\n    </li>');var t,n,r,o,i})).join(""),"\n  <ul>")},fu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cu(e,t)}(i,e);var t,n,r,o=uu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._realtimeCurrencies=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return lu(this._realtimeCurrencies)}},{key:"getContainer",value:function(){return document.querySelector(".js-currency-container")}},{key:"getCurrencyListContainer",value:function(){return document.querySelector(".js-currency-list-container")}}])&&iu(t.prototype,n),r&&iu(t,r),i}(_t);function yu(e){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(e)}function du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pu(e,t){return pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pu(e,t)}function hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mu(e);if(t){var o=mu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vu(this,n)}}function vu(e,t){if(t&&("object"===yu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bu(e)}function bu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mu(e){return mu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mu(e)}var _u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(i,e);var t,n,r,o=hu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bu(t=o.call(this)),"_changeHandler",(function(e){e.preventDefault(),t._handler.change(e.target.dataset.fieldid,e.target.value)})),t._field=e,t}return t=i,(n=[{key:"getTemplate",value:function(){return e=this._field,'\n  <label class="login__label js-label '.concat((t=e.isTouched,n=e.isValid,t?n?"login__label--success":"login__label--error":""),'">\n    <span class="currency__span currency__span--sum">').concat(e.title,"</span>\n      <input data-fieldid=").concat(e.id,' class="currency__input currency__input--long login__input js-input" value="').concat(e.value,'" type="number" placeholder="Введите ').concat(e.title,'" required id="test-new-currency">\n  </label>\n  ');var e,t,n}},{key:"_setValid",value:function(e){e.target.closest(".js-label").classList.remove("login__label--error")}},{key:"setChangeHandler",value:function(e){var t=this;this._handler.change=e,this.getElement().querySelector(".js-input").addEventListener("focusout",this._changeHandler),this.getElement().querySelector(".js-input").addEventListener("focus",(function(e){return t._setValid(e)}))}}])&&du(t.prototype,n),r&&du(t,r),i}(_t);function gu(e){return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gu(e)}function wu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ku(e,t){return ku=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ku(e,t)}function Ou(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Su(e);if(t){var o=Su(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ju(this,n)}}function ju(e,t){if(t&&("object"===gu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Su(e){return Su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Su(e)}var Eu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ku(e,t)}(i,e);var t,n,r,o=Ou(i);function i(){return wu(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getTemplate",value:function(){return'\n    <div class="container">\n      <h1 class="section-title contacts__title">Карта банкоматов</h1>\n      <div class="contacts__map" id="map"></div>\n    </div>\n    '}},{key:"_getPlaceMark",value:function(e){var t=e.lat,n=e.lon;return new ymaps.Placemark([t,n],{balloonContent:'\n            <div class="balloon">\n              <h4 class="balloon__title">Coin.</h4>\n              <a href="tel:+74958854547" class="balloon__tel-number">\n                  <svg width="100%" height="100%" viewbox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <path d="M16.3425 12.0983C15.215 12.0983 14.1242 11.915 13.1067 11.585C12.7858 11.475 12.4283 11.5575 12.1808 11.805L10.7417 13.6108C8.1475 12.3733 5.71833 10.0358 4.42583 7.35L6.21333 5.82833C6.46083 5.57167 6.53417 5.21417 6.43333 4.89333C6.09417 3.87583 5.92 2.785 5.92 1.6575C5.92 1.1625 5.5075 0.75 5.0125 0.75H1.84083C1.34583 0.75 0.75 0.97 0.75 1.6575C0.75 10.1733 7.83583 17.25 16.3425 17.25C16.9933 17.25 17.25 16.6725 17.25 16.1683V13.0058C17.25 12.5108 16.8375 12.0983 16.3425 12.0983Z" />\n                  </svg>\n                  <span>+7 (495) 885-45-47</span>\n              </a>\n              <div class="balloon__worktime">\n                  <span class="grey_text">Часы работы:</span>\n                  с 10:00 до 21:00\n              </div>\n              <div class="balloon__description">\n                  <span class="balloon__grey-text">Что здесь:</span>\n                  обслуживание счетов, пункт обмена, пункт внесения-выдачи наличных, сервисный центр\n              </div>\n          </div>\n          '})}},{key:"init",value:function(e){var t=this;document.getElementById("map")&&ymaps.load().then((function(n){var r=new n.Map("map",{center:[55.75399399999374,37.62209300000001],zoom:11},{searchControlProvider:"yandex#search"});e&&e.forEach((function(e){return r.geoObjects.add(t._getPlaceMark(e))}))})).catch((function(e){return console.log("Failed to load Yandex Maps",e)}))}}])&&Cu(t.prototype,n),r&&Cu(t,r),i}(_t);function Tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],c=!0,u=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._accountsPresenter=new bt(this),this._rootContainer=document.getElementById("root"),this._headerContainer=new Tt,this._mainContainer=new Lt,this._noAccountsComponent=new Xt,this._accountsComponents=new Map,this._formFieldComponents=new Map,this._formTransactionFieldComponents=new Map,this._formCurrencyFieldComponents=new Map}var t,n,r;return t=e,n=[{key:"_renderHeaderComponent",value:function(){var e=this._accountsPresenter.getCurrentRoute(),t=this._accountsPresenter.getIsAuth();this._headerComponent=new Yt(e,t),wt.render(this._headerContainer,this._headerComponent),this._headerComponent.setBurgerClickHandler()}},{key:"_clearHeaderComponent",value:function(){wt.remove(this._headerComponent)}},{key:"_createInput",value:function(e,t){var n=new er(e,t);return n.setChangeHandler(this._accountsPresenter.handleFieldChange),this._formFieldComponents.set(e.id,n),n}},{key:"_createTransactionDropdown",value:function(e){var t=this._accountsPresenter.getVerifiedAccounts(),n=new br(e,t);return n.setChangeHandlerInput(this._accountsPresenter.handleTransactionFieldChange),n.setChangeHandlerDropdown(this._accountsPresenter.handleTransactionFieldChange),this._formTransactionFieldComponents.set(e.id,n),n}},{key:"_createTransactionInputNumber",value:function(e){var t=new ar(e);return t.setChangeHandler(this._accountsPresenter.handleTransactionFieldChange),this._formTransactionFieldComponents.set(e.id,t),t}},{key:"_creatCurrencyInputNumber",value:function(e){var t=new _u(e);return t.setChangeHandler(this._accountsPresenter.handleCurrencyFieldChange),this._formCurrencyFieldComponents.set(e.id,t),t}},{key:"_createFieldComponent",value:function(e){switch(e.type){case O:return this._createInput(e);case j:return this._createInput(e,!0);default:return null}}},{key:"_createTransactionFieldComponent",value:function(e){switch(e.type){case E:return this._createTransactionDropdown(e);case S:return this._createTransactionInputNumber(e);default:return null}}},{key:"_createCurrencyFieldComponent",value:function(e){return e.type===S?this._creatCurrencyInputNumber(e):null}},{key:"_renderFormField",value:function(e,t){wt.render(e,t)}},{key:"_renderFormErrors",value:function(){var e=this._errorsContainer,t=this._accountsPresenter.getErrorMessages();this._formErrorsComponent=new Pn(t),wt.render(e,this._formErrorsComponent)}},{key:"_renderTransactionFormErrors",value:function(){var e=this._errorsContainer,t=this._accountsPresenter.getTransactionErrorMessages();this._formTransactionErrorsComponent=new Pn(t),wt.render(e,this._formTransactionErrorsComponent)}},{key:"_renderCurrencyFormErrors",value:function(){var e=this._errorsContainer;this._realtimeCurrencyComponents;var t=this._accountsPresenter.getCurrencyErrorMessages();this._formCurrencyErrorsComponent=new Pn(t),wt.render(e,this._formCurrencyErrorsComponent)}},{key:"_renderLoginButton",value:function(){var e=this._errorsContainer.getErrorsContainer(),t=this._accountsPresenter.getLoginFormFields().some((function(e){return e.required&&!e.isValid}));this.addAccountButtonComponent=new Kn(T,t),this.addAccountButtonComponent.setAccountClickHandler(this._accountsPresenter.handleAddAccountClick),wt.render(e,this.addAccountButtonComponent,v)}},{key:"_renderTransactionButton",value:function(){var e=this._errorsContainer.getErrorsContainer(),t=this._accountsPresenter.getTransactionFormFields().some((function(e){return e.required&&!e.isValid}));this.addTransactionButtonComponent=new ui(P,t),this.addTransactionButtonComponent.setClickHandler(this._accountsPresenter.handleTransactionClick),wt.render(e,this.addTransactionButtonComponent,v)}},{key:"_renderCurrencyButton",value:function(e){var t=this._accountsPresenter.getCurrencyFormFields().some((function(e){return e.required&&!e.isValid}));this.currencyButton=new ru(A,t),this.currencyButton.setClickHandler(this._accountsPresenter.handleCurrencyClick),wt.render(e,this.currencyButton)}},{key:"_clearCurrencyButton",value:function(){this.currencyButton&&wt.remove(this.currencyButton)}},{key:"_createAccountComponent",value:function(e){var t=new io(e);return t.setProfileAccountClickHandler(this._accountsPresenter.handleProfileAccountClick),t}},{key:"_renderAccountComponent",value:function(e,t,n){var r=this._createAccountComponent(n);wt.render(e,r),t.set(n.account,r)}},{key:"_renderNoAccounts",value:function(){wt.render(this._mainContainer,this._noAccountsComponent)}},{key:"_renderAccounts",value:function(){var e=this;if(this.isLoading||0!==this._accountsPresenter.getAccountsCount()){this._accountsHeadComponent=new Or,wt.render(this._mainSectionContainer,this._accountsHeadComponent);var t=this._accountsHeadComponent.getAccountsTopContainer(),n=this._accountsPresenter.getCurrentSortType(),r=new qr(n);wt.render(t,r),r.setChangeHandlerDropdown(this._accountsPresenter.handleDropdownChange),this.newAccountComponent=new zr,this.newAccountComponent.setAccountClickHandler(this._accountsPresenter.handleNewAccountButtonClick),wt.render(t,this.newAccountComponent),this._accountsBodyContainer=new Rr,wt.render(this._mainSectionContainer,this._accountsBodyContainer),this._accountsPresenter.getAccounts().forEach((function(t){e._renderAccountComponent(e._accountsBodyContainer,e._accountsComponents,t)}))}else this._renderNoAccounts()}},{key:"_clearAccounts",value:function(){this._accountsHeadComponent&&wt.remove(this._accountsHeadComponent),this._accountsComponents.forEach((function(e){return wt.remove(e)})),this._accountsComponents.clear(),this._accountsBodyContainer&&wt.remove(this._accountsBodyContainer)}},{key:"_clearAccount",value:function(){this._accountsPresenter.resetTransactionFormFields(),this._accountsPresenter.resetTransactionErrorMessages(),this._accountHeadComponent&&wt.remove(this._accountHeadComponent),this._formTransactionFieldComponents.forEach((function(e){return wt.remove(e)})),this._formTransactionFieldComponents.clear(),this._formErrorsComponent&&wt.remove(this._formErrorsComponent),this._formTransactionErrorsComponent&&wt.remove(this._formTransactionErrorsComponent),this._accountBodyContainer&&wt.remove(this._accountBodyContainer)}},{key:"_getContainer",value:function(e){switch(e){case"0":return this._accountBodyContainer.get0Container();case"1":return this._accountBodyContainer.get1Container();case"2":return this._accountBodyContainer.get2Container();default:return null}}},{key:"_getContainerHistory",value:function(e){switch(e){case"0":return this._historyBodyContainer.get0Container();case"1":return this._historyBodyContainer.get1Container();case"2":return this._historyBodyContainer.get2Container();default:return null}}},{key:"_getContainerCurrency",value:function(e){switch(e){case"0":return this._currencyBodyContainer.get0Container();case"1":return this._currencyBodyContainer.get1Container();case"2":return this._currencyBodyContainer.get2Container();default:return null}}},{key:"_getChild",value:function(e){var t=e.currentAccount;switch(e.child){case"a":return this.accountBodyA=new Fo(t);case"b":var n=this._accountsPresenter.getMappedLastYearTransactions(t);return this.accountBodyB=new Vo(t,n);case"c":return this.accountBodyC=new Go(t);default:return null}}},{key:"_renderItemOrder",value:function(e){var t=e.currentAccount,n=e.container,r=e.child,o=this._getContainer(n),i=this._getChild({currentAccount:t,child:r});o&&i&&wt.render(o,i)}},{key:"_getChildHistory",value:function(e){var t=e.currentAccount,n=e.child,r=this._accountsPresenter.getMappedLastYearTransactions(t);switch(n){case"a":return this.historyBodyA=new xi(t,r);case"b":return this.historyBodyB=new Vi(t,r);case"c":return this.historyBodyC=new Gi(t);default:return null}}},{key:"_getChildCurrency",value:function(e){var t=e.child,n=this._accountsPresenter.getMyCurrencies();switch(t){case"a":return this.currencyBodyA=new kc(n);case"b":return this.currencyBodyB=new Ac;case"c":return this.currencyBodyC=new Dc;default:return null}}},{key:"_renderItemOrderHistory",value:function(e){var t=e.currentAccount,n=e.container,r=e.child,o=this._getContainerHistory(n),i=this._getChildHistory({currentAccount:t,child:r});o&&i&&wt.render(o,i)}},{key:"_renderItemOrderCurrency",value:function(e){var t=e.currentAccount,n=e.container,r=e.child,o=this._getContainerCurrency(n),i=this._getChildCurrency({currentAccount:t,child:r});o&&i&&wt.render(o,i)}},{key:"_renderAccount",value:function(e){var t=this;if(this.isLoading||e){var n=this._accountsPresenter.getCurrentAccount(e);this._accountHeadComponent=new po(n),wt.render(this._mainSectionContainer,this._accountHeadComponent),this._accountHeadComponent.setClickHandler(this._accountsPresenter.handleBackToAccountsButtonClick),this._accountBodyContainer=new jo,wt.render(this._mainSectionContainer,this._accountBodyContainer),this._accountBodyContainer.init(),this._accountBodyContainer.setChangeHandler(this._accountsPresenter.handleDnDChange),this._accountsPresenter.getShowAccountOrder().forEach((function(e){var r=Tu(Object.entries(e),1)[0],o=r[0],i=r[1];t._renderItemOrder({currentAccount:n,container:o,child:i})})),this._renderTransactionForm(this.accountBodyA),this.accountBodyB.setChart(),this.accountBodyB.setClickHandler(this._accountsPresenter.handleToHistoryClick),this.accountBodyC.setClickHandler(this._accountsPresenter.handleToHistoryClick)}else this._renderNoAccounts()}},{key:"_renderHistory",value:function(e){var t=this;if(this.isLoading||e){var n=this._accountsPresenter.getCurrentAccount(e);this._historyHeadComponent=new hi(n),wt.render(this._mainSectionContainer,this._historyHeadComponent),this._historyHeadComponent.setClickHandler(this._accountsPresenter.handleToAccountClick),this._historyBodyContainer=new Si,wt.render(this._mainSectionContainer,this._historyBodyContainer),this._historyBodyContainer.init(),this._historyBodyContainer.setChangeHandler(this._accountsPresenter.handleDnDChangeHistory),this._accountsPresenter.getShowHistoryOrder().forEach((function(e){var r=Tu(Object.entries(e),1)[0],o=r[0],i=r[1];t._renderItemOrderHistory({currentAccount:n,container:o,child:i})})),this.historyBodyA.setChart(),this.historyBodyB.setChart()}else this._renderNoAccounts()}},{key:"_clearRealtimeCurrency",value:function(){this._realtimeCurrenciesList&&wt.remove(this._realtimeCurrenciesList)}},{key:"_renderRealtimeCurrency",value:function(){var e=this.currencyBodyB.getContainer(),t=this._accountsPresenter.getRealtimeCurrencies();this._realtimeCurrenciesList=new fu(t),wt.render(e,this._realtimeCurrenciesList)}},{key:"_renderCurrency",value:function(){var e=this,t=this._accountsPresenter.getAllCurrencies(),n=this._accountsPresenter.getMyCurrencies();this.isLoading||t.length||Object.values(n).keys?(this._currencyHeadComponent=new oc,wt.render(this._mainSectionContainer,this._currencyHeadComponent),this._currencyBodyContainer=new hc,wt.render(this._mainSectionContainer,this._currencyBodyContainer),this._currencyBodyContainer.init(),this._currencyBodyContainer.setChangeHandler(this._accountsPresenter.handleDnDChangeCurrency),this._accountsPresenter.getShowCurrencyOrder().forEach((function(t){var n=Tu(Object.entries(t),1)[0],r=n[0],o=n[1];e._renderItemOrderCurrency({container:r,child:o})})),this._renderCurrencyForm(),this._renderRealtimeCurrency()):this._renderNoAccounts()}},{key:"_renderBanks",value:function(){if(this.isLoading||0!==this._accountsPresenter.getBanksCount()){this._mapComponent=new Eu,wt.render(this._mainSectionContainer,this._mapComponent);var e=this._accountsPresenter.getBanks();this._mapComponent.init(e)}else this._renderNoAccounts()}},{key:"_renderLoginForm",value:function(){var e=this,t=this._accountsPresenter.getLoginFormFields().map((function(t){return e._createFieldComponent(t)}));this._loginContainer=new un,wt.render(this._mainSectionContainer,this._loginContainer);var n=this._loginContainer.getFormContainer();t.forEach((function(t){e._renderFormField(n,t)})),this._errorsContainer=new Cn,wt.render(n,this._errorsContainer),this._renderFormErrors(),this._renderLoginButton()}},{key:"_renderTransactionForm",value:function(e){var t=this,n=this._accountsPresenter.getTransactionFormFields().map((function(e){return t._createTransactionFieldComponent(e)})),r=e.getFormContainer();n.forEach((function(e){t._renderFormField(r,e)})),this._errorsContainer=new Cn,wt.render(r,this._errorsContainer),this._renderTransactionFormErrors(),this._renderTransactionButton()}},{key:"_clearCurrencyForm",value:function(){this._inputBlockCurrency&&wt.remove(this._inputBlockCurrency),this._errorsContainer&&wt.remove(this._errorsContainer),this._clearCurrencyButton()}},{key:"_renderCurrencyForm",value:function(){var e=this,t=this.currencyBodyC.getCurrencyBlockContainer(),n=this.currencyBodyC.getCurrencyTableContainer(),r=this._accountsPresenter.getAllCurrencies(),o=this._accountsPresenter.getCurrentFromCurrency(),i=this._accountsPresenter.getMyCurrencies(),c=this._accountsPresenter.getCurrentToCurrency();this._inputBlockCurrency=new Jc({myCurrencies:i,currentFromCurrency:o,allCurrencies:r,currentToCurrency:c}),wt.render(t,this._inputBlockCurrency),this._inputBlockCurrency.init(),this._inputBlockCurrency.setChangeHandlerDropdown(this._accountsPresenter.handleCurrencyChange);var u=this._accountsPresenter.getCurrencyFormFields().map((function(t){return e._createCurrencyFieldComponent(t)})),a=this._inputBlockCurrency.getFormContainer();u.forEach((function(t){e._renderFormField(a,t)})),this._errorsContainer=new Cn,wt.render(n,this._errorsContainer,v),this._renderCurrencyFormErrors(),this._renderCurrencyButton(t)}},{key:"clearMinor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.realtimeCurrenciesChange,n=e.currentCurrencyTypeChange,r=e.resetInputValue;this._loadingComponent&&wt.remove(this._loadingComponent),this._noAccountsComponent&&wt.remove(this._noAccountsComponent);var o=this._accountsPresenter.getCurrentRoute();if("accounts"!==o){if("account"!==o)return"currency"===o?(t&&this._clearRealtimeCurrency(),r&&(this._accountsPresenter.resetCurrencyFields(),this._formCurrencyFieldComponents.forEach((function(e){return wt.remove(e)})),this._formCurrencyFieldComponents.clear()),void(n&&this._clearCurrencyForm())):void 0;this._clearAccount()}else this._clearAccounts()}},{key:"renderMinor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isLoading,n=e.realtimeCurrenciesChange,r=e.currentCurrencyTypeChange;if(void 0!==t&&(this.isLoading=t),this.isLoading)this._renderLoading();else{var o=this._accountsPresenter.getCurrentRoute();"accounts"===o&&this._renderAccounts(),"currency"===o&&(r&&this._renderCurrencyForm(),n&&this._renderRealtimeCurrency())}}},{key:"updateMinor",value:function(e){var t=e.field;t&&this._formCurrencyFieldComponents.has(t.id)&&this._replaceCurrencyFieldComponent(this._formCurrencyFieldComponents,t.id),this.clearMinor(e),this.renderMinor(e)}},{key:"clearMajor",value:function(){this._clearHeaderComponent(),this._loadingComponent&&wt.remove(this._loadingComponent),this._noAccountsComponent&&wt.remove(this._noAccountsComponent),wt.remove(this._mainContainer);var e=this._accountsPresenter.getCurrentRoute();"accounts"!==e?"account"!==e?(this._mainSectionContainer=null,this._mapComponent=null):this._clearAccount():this._clearAccounts()}},{key:"_renderLoading",value:function(){this._loadingComponent=new hn,wt.render(this._mainSectionContainer,this._loadingComponent)}},{key:"_loader",value:function(e){e&&this._renderLoading()}},{key:"renderMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isLoading,n=e.accountId;wt.render(this._rootContainer,this._headerContainer),this._renderHeaderComponent(),wt.render(this._rootContainer,this._mainContainer),this._mainSectionContainer=this._mainContainer.getMainSectionContainer();var r=this._accountsPresenter.getCurrentRoute();return"accounts"===r?(document.title="Coin. - Accounts",this._loader(t),void this._renderAccounts()):"account"===r?(document.title="Coin. - Account",this._loader(t),void this._renderAccount(n)):"history"===r?(document.title="Coin. - History",this._loader(t),void this._renderHistory(n)):"currency"===r?(document.title="Coin. - Currency",this._loader(t),void this._renderCurrency()):"banks"===r?(document.title="Coin. - Banks",this._loader(t),void this._renderBanks()):(document.title="Coin. - Login",void this._renderLoginForm())}},{key:"updateMajor",value:function(e){this.clearMajor(),this.renderMajor(e)}},{key:"_replaceFieldComponent",value:function(e,t){var n=e.get(t),r=this._createFieldComponent(this._accountsPresenter.getFormField(t));wt.replace(r,n),wt.remove(n),e.delete(t),e.set(t,r)}},{key:"_replaceTransactionFieldComponent",value:function(e,t){var n=e.get(t),r=this._createTransactionFieldComponent(this._accountsPresenter.getTransactionFormField(t));wt.replace(r,n),wt.remove(n),e.delete(t),e.set(t,r)}},{key:"_replaceCurrencyFieldComponent",value:function(e,t){var n=e.get(t),r=this._createCurrencyFieldComponent(this._accountsPresenter.getCurrencyFormField(t));wt.replace(r,n),wt.remove(n),e.delete(t),e.set(t,r)}},{key:"clearPatch",value:function(){this._formErrorsComponent&&wt.remove(this._formErrorsComponent),this._formTransactionErrorsComponent&&wt.remove(this._formTransactionErrorsComponent),this.addAccountButtonComponent&&wt.remove(this.addAccountButtonComponent),this.addTransactionButtonComponent&&wt.remove(this.addTransactionButtonComponent)}},{key:"renderPatch",value:function(){var e=this._accountsPresenter.getCurrentRoute();"account"===e&&(this._renderTransactionFormErrors(),this._renderTransactionButton()),""===e&&(this._renderFormErrors(),this._renderLoginButton())}},{key:"updatePatch",value:function(e){this._formFieldComponents.has(e.id)&&this._replaceFieldComponent(this._formFieldComponents,e.id),this._formTransactionFieldComponents.has(e.id)&&this._replaceTransactionFieldComponent(this._formTransactionFieldComponents,e.id),this.clearPatch(),this.renderPatch(e)}},{key:"init",value:function(){this.renderMajor(),this._accountsPresenter.init()}}],n&&Au(t.prototype,n),r&&Au(t,r),e}())).init()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var c=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],u=!0,a=0;a<n.length;a++)(!1&i||c>=i)&&Object.keys(r.O).every((e=>r.O[e](n[a])))?n.splice(a--,1):(u=!1,i<c&&(c=i));if(u){e.splice(l--,1);var s=o();void 0!==s&&(t=s)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[c,u,a]=n,s=0;if(c.some((t=>0!==e[t]))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(a)var l=a(r)}for(t&&t(n);s<c.length;s++)i=c[s],r.o(e,i)&&e[i]&&e[i][0](),e[c[s]]=0;return r.O(l)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[143],(()=>r(672)));o=r.O(o)})();